{"remainingRequest":"/mnt/d/NE PAS SUPPRIMER/DESKTOP/DERNIERE VERSION PROJET IOT/tp_app/node_modules/vue-loader/lib/index.js??vue-loader-options!/mnt/d/NE PAS SUPPRIMER/DESKTOP/DERNIERE VERSION PROJET IOT/tp_app/src/components/Chart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/mnt/d/NE PAS SUPPRIMER/DESKTOP/DERNIERE VERSION PROJET IOT/tp_app/src/components/Chart.vue","mtime":1585688489367},{"path":"/mnt/d/NE PAS SUPPRIMER/DESKTOP/DERNIERE VERSION PROJET IOT/tp_app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/d/NE PAS SUPPRIMER/DESKTOP/DERNIERE VERSION PROJET IOT/tp_app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/mnt/d/NE PAS SUPPRIMER/DESKTOP/DERNIERE VERSION PROJET IOT/tp_app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/d/NE PAS SUPPRIMER/DESKTOP/DERNIERE VERSION PROJET IOT/tp_app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBDaGFydCB9IGZyb20gImhpZ2hjaGFydHMtdnVlIjsNCmltcG9ydCBIaWdoY2hhcnRzIGZyb20gImhpZ2hjaGFydHMiOw0KaW1wb3J0IGV4cG9ydGluZ0luaXQgZnJvbSAiaGlnaGNoYXJ0cy9tb2R1bGVzL2V4cG9ydGluZyI7DQppbXBvcnQgc3RvY2tJbml0IGZyb20gImhpZ2hjaGFydHMvbW9kdWxlcy9zdG9jayI7DQoNCnN0b2NrSW5pdChIaWdoY2hhcnRzKTsNCmV4cG9ydGluZ0luaXQoSGlnaGNoYXJ0cyk7DQoNCnZhciBvcHRpb25zID0gew0KICBjaGFydDogew0KICAgIHR5cGU6ICJzcGxpbmUiDQogIH0sDQogIHRpdGxlOiB7DQogICAgdGV4dDogIlRlbXBlcmF0dXJlIiwNCiAgICB4OiAtMjAgLy9jZW50ZXINCiAgfSwNCiAgeEF4aXM6IHsNCiAgICB0aXRsZTogew0KICAgICAgdGV4dDogIkhldXJlIg0KICAgIH0sDQogICAgdHlwZTogImRhdGV0aW1lIg0KICB9LA0KICB5QXhpczogew0KICAgIHRpdGxlOiB7DQogICAgICB0ZXh0OiAiVGVtcGVyYXR1cmUgKMKwQykiDQogICAgfSwNCiAgICBwbG90TGluZXM6IFsNCiAgICAgIHsNCiAgICAgICAgdmFsdWU6IDAsDQogICAgICAgIHdpZHRoOiAxLA0KICAgICAgICBjb2xvcjogIiM4MDgwODAiDQogICAgICB9DQogICAgXQ0KICB9LA0KICB0b29sdGlwOiB7DQogICAgdmFsdWVTdWZmaXg6ICLCsEMiDQogIH0sDQogIGxlZ2VuZDogew0KICAgIGxheW91dDogInZlcnRpY2FsIiwNCiAgICBhbGlnbjogInJpZ2h0IiwNCiAgICB2ZXJ0aWNhbEFsaWduOiAibWlkZGxlIiwNCiAgICBib3JkZXJXaWR0aDogMA0KICB9LA0KICBzZXJpZXM6IFsNCiAgICB7DQogICAgICBuYW1lOiAiRVNQMSIsDQogICAgICBkYXRhOiBbXQ0KICAgIH0sDQogICAgew0KICAgICAgbmFtZTogIkVTUDIiLA0KICAgICAgZGF0YTogW10NCiAgICB9LA0KICAgIHsNCiAgICAgIG5hbWU6ICJFU1AzIiwNCiAgICAgIGRhdGE6IFtdDQogICAgfSwNCiAgICB7DQogICAgICBuYW1lOiAiRVNQNCIsDQogICAgICBkYXRhOiBbXQ0KICAgIH0NCiAgXQ0KfTsNCnZhciBvcHRpb25zMiA9IHsNCiAgY2hhcnQ6IHsNCiAgICB0eXBlOiAic3BsaW5lIg0KICB9LA0KICB0aXRsZTogew0KICAgIHRleHQ6ICJMdW1pw6hyZSIsDQogICAgeDogLTIwIC8vY2VudGVyDQogIH0sDQogIHhBeGlzOiB7DQogICAgdGl0bGU6IHsNCiAgICAgIHRleHQ6ICJIZXVyZSINCiAgICB9LA0KICAgIHR5cGU6ICJkYXRldGltZSINCiAgfSwNCiAgeUF4aXM6IHsNCiAgICB0aXRsZTogew0KICAgICAgdGV4dDogIkx1bWVuIChMdW0pIg0KICAgIH0sDQogICAgcGxvdExpbmVzOiBbDQogICAgICB7DQogICAgICAgIHZhbHVlOiAwLA0KICAgICAgICB3aWR0aDogMSwNCiAgICAgICAgY29sb3I6ICIjODA4MDgwIg0KICAgICAgfQ0KICAgIF0NCiAgfSwNCiAgdG9vbHRpcDogew0KICAgIHZhbHVlU3VmZml4OiAiTHVtIg0KICB9LA0KICBsZWdlbmQ6IHsNCiAgICBsYXlvdXQ6ICJ2ZXJ0aWNhbCIsDQogICAgYWxpZ246ICJyaWdodCIsDQogICAgdmVydGljYWxBbGlnbjogIm1pZGRsZSIsDQogICAgYm9yZGVyV2lkdGg6IDANCiAgfSwNCiAgc2VyaWVzOiBbDQogICAgew0KICAgICAgbmFtZTogIkVTUDEiLA0KICAgICAgZGF0YTogW10NCiAgICB9LA0KICAgIHsNCiAgICAgIG5hbWU6ICJFU1AyIiwNCiAgICAgIGRhdGE6IFtdDQogICAgfSwNCiAgICB7DQogICAgICBuYW1lOiAiRVNQMyIsDQogICAgICBkYXRhOiBbXQ0KICAgIH0sDQogICAgew0KICAgICAgbmFtZTogIkVTUDQiLA0KICAgICAgZGF0YTogW10NCiAgICB9DQogIF0NCn07DQpleHBvcnQgZGVmYXVsdCB7DQogIHByb3BzOiB7DQogICAgd2hpY2hfZXNwczogQXJyYXkNCiAgICAsDQogICAgazogTnVtYmVyLA0KICAgIHBhcnRzZGF0YTogew0KICAgICAgdHlwZTogQXJyYXkNCiAgICB9DQogIH0sDQoNCiAgY29tcG9uZW50czogew0KICAgIGhpZ2hjaGFydHM6IENoYXJ0DQogIH0sDQoNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgbm9kZV91cmw6ICIiLA0KICAgICAgaXRlbXM6IFtdLA0KICAgICAgb3B0aW9uczogb3B0aW9ucywNCiAgICAgIG9wdGlvbnMyOiBvcHRpb25zMiwNCiAgICAgIGxpc3RlRGF0YTogW10NCiAgICB9Ow0KICB9LA0KICBtb3VudGVkKCl7DQogDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBzdGFydDogZnVuY3Rpb24oKSB7DQogICAgICAvKiAgICB2YXIgY2hhcnQgPSB0aGlzLiRyZWZzLmhpZ2hjaGFydHMuY2hhcnQ7DQogICAgICBjaGFydC5jcmVkaXRzLnVwZGF0ZSh7DQogICAgICAgIHN0eWxlOiB7DQogICAgICAgICAgY29sb3I6ICIjIiArICgoTWF0aC5yYW5kb20oKSAqIDB4ZmZmZmZmKSB8IDApLnRvU3RyaW5nKDE2KQ0KICAgICAgICB9DQogICAgICB9KTsgKi8NCiAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMud2hpY2hfZXNwcy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgIHRoaXMucHJvY2Vzc19lc3AodGhpcy53aGljaF9lc3BzLCBpKTsNCiAgICAgICAgfSANCiAgICAgDQogICAgfSwNCg0KICAgIHByb2Nlc3NfZXNwKHdoaWNoX2VzcHMsIGkpIHsNCiAgICAgIGNvbnN0IHJlZnJlc2hUID0gMTAwMDAwOyAvLyBSZWZyZXNoIHBlcmlvZCBmb3IgY2hhcnQNCiAgICAgIHZhciBlc3AgPSB3aGljaF9lc3BzW2ldOyAvLyBMJ0VTUCAiYSBkZXNzaW5lciINCiAgICANCiAgICAgIC8vIEdlc3Rpb24gZGUgbGEgdGVtcGVyYXR1cmUNCiAgICAgIC8vIHByZW1pZXIgYXBwZWwgcG91ciBldml0ZXIgZGUgZGV2b2lyIGF0dGVuZHJlIFJlZnJlc2hUDQogICAgICB0aGlzLmdldF9zYW1wbGVzKCIvZXNwL3RlbXAiLCB0aGlzLm9wdGlvbnMuc2VyaWVzW2ldLCBlc3ApOw0KICAgICAgLy9jYWxscyBhIGZ1bmN0aW9uIG9yIGV2YWx1YXRlcyBhbiBleHByZXNzaW9uIGF0IHNwZWNpZmllZA0KICAgICAgLy9pbnRlcnZhbHMgKGluIG1pbGxpc2Vjb25kcykuDQogICAgICB3aW5kb3cuc2V0SW50ZXJ2YWwoDQogICAgICAgIHRoaXMuZ2V0X3NhbXBsZXMsDQogICAgICAgIHJlZnJlc2hULA0KICAgICAgICAiL2VzcC90ZW1wIiwgLy8gcGFyYW0gMSBmb3IgZ2V0X3NhbXBsZXMoKQ0KICAgICAgICB0aGlzLm9wdGlvbnMuc2VyaWVzW2ldLCAvLyBwYXJhbSAyIGZvciBnZXRfc2FtcGxlcygpDQogICAgICAgIGVzcA0KICAgICAgKTsgLy8gcGFyYW0gMyBmb3IgZ2V0X3NhbXBsZXMoKQ0KDQogICAgICAvLyBHZXN0aW9uIGRlIGxhIGx1bWllcmUNCiAgICAgIHRoaXMuZ2V0X3NhbXBsZXMoIi9lc3AvbGlnaHQiLCB0aGlzLm9wdGlvbnMyLnNlcmllc1tpXSwgZXNwKTsNCiAgICAgIHdpbmRvdy5zZXRJbnRlcnZhbCgNCiAgICAgICAgdGhpcy5nZXRfc2FtcGxlcywNCiAgICAgICAgcmVmcmVzaFQsDQogICAgICAgICIvZXNwL2xpZ2h0IiwgLy8gVVJMIHRvIEdFVA0KICAgICAgICB0aGlzLm9wdGlvbnMyLnNlcmllc1tpXSwgLy8gU2VyaWUgdG8gZmlsbA0KICAgICAgICBlc3ANCiAgICAgICk7IC8vIEVTUCB0YXJnZXRlZA0KICAgIH0sDQoNCiAgICBnZXRfc2FtcGxlcyhwYXRoX29uX25vZGUsIHNlcmllLCB3aCkgew0KICAgICAgLy8gcGF0aF9vbl9ub2RlID0+IGhlbHAgdG8gY29tcG9zZSB1cmwgdG8gZ2V0IG9uIEpzIG5vZGUNCiAgICAgIC8vIHNlcmllID0+IGZvciBjaG9vc2luZyBjaGFydC9zZXJpZSBvbiB0aGUgcGFnZQ0KICAgICAgLy8gd2ggPT4gd2hpY2ggZXNwIGRvIHdlIHdhbnQgdG8gcXVlcnkgZGF0YQ0KDQogICAgICB0aGlzLm5vZGVfdXJsID0gImh0dHA6Ly81MS44My43Ny4xMjc6MzAwMCI7DQoNCiAgICAgIC8vaHR0cHM6Ly9vcGVuY2xhc3Nyb29tcy5jb20vZnIvY291cnNlcy8xNTY3OTI2LXVuLXNpdGUtd2ViLWR5bmFtaXF1ZS1hdmVjLWpxdWVyeS8xNTY5NjQ4LWxlLWZvbmN0aW9ubmVtZW50LWRlLWFqYXgNCiAgICAgICAgdmFyIGxpc3RlID0gW10NCiAgICAgIGxldCB1cmwgPSB0aGlzLm5vZGVfdXJsICsgcGF0aF9vbl9ub2RlICsgIj93aG89IiArIHdoOw0KICAgICAgZmV0Y2godXJsKQ0KICAgICAgICAudGhlbihyZXNwb25zZUpTT04gPT4gew0KICAgICAgICAgIHJldHVybiByZXNwb25zZUpTT04uanNvbigpOw0KICAgICAgICB9KQ0KICAgICAgICAudGhlbihyZXNwb25zZUpTID0+IHsNCiAgICAgICAgICB0aGlzLml0ZW1zID0gcmVzcG9uc2VKUzsNCg0KICAgICAgICAgIGlmICh0aGlzLml0ZW1zKSB7DQogICAgICAgICAgICB0aGlzLml0ZW1zLmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCkgew0KICAgICAgICAgICAgICAgIGxpc3RlLnB1c2goW0RhdGUucGFyc2UoZWxlbWVudC5kYXRlKSwgZWxlbWVudC52YWx1ZV0pOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfQ0KICAgICAgICAgIHNlcmllLmRhdGEgPSBsaXN0ZTsNCiAgICAgICAgICANCiAgICAgICAgfSk7DQogICAgfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["Chart.vue"],"names":[],"mappings":";;;;;;;;;;;AAWA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Chart.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <md-button class=\"md-primary md-raised\" @click=\"start\">Start simulation</md-button>\r\n    <br />\r\n    <br />\r\n    <highcharts :options=\"options\" ref=\"highcharts\"></highcharts>\r\n    <highcharts :options=\"options2\" ref=\"highcharts\"></highcharts>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Chart } from \"highcharts-vue\";\r\nimport Highcharts from \"highcharts\";\r\nimport exportingInit from \"highcharts/modules/exporting\";\r\nimport stockInit from \"highcharts/modules/stock\";\r\n\r\nstockInit(Highcharts);\r\nexportingInit(Highcharts);\r\n\r\nvar options = {\r\n  chart: {\r\n    type: \"spline\"\r\n  },\r\n  title: {\r\n    text: \"Temperature\",\r\n    x: -20 //center\r\n  },\r\n  xAxis: {\r\n    title: {\r\n      text: \"Heure\"\r\n    },\r\n    type: \"datetime\"\r\n  },\r\n  yAxis: {\r\n    title: {\r\n      text: \"Temperature (°C)\"\r\n    },\r\n    plotLines: [\r\n      {\r\n        value: 0,\r\n        width: 1,\r\n        color: \"#808080\"\r\n      }\r\n    ]\r\n  },\r\n  tooltip: {\r\n    valueSuffix: \"°C\"\r\n  },\r\n  legend: {\r\n    layout: \"vertical\",\r\n    align: \"right\",\r\n    verticalAlign: \"middle\",\r\n    borderWidth: 0\r\n  },\r\n  series: [\r\n    {\r\n      name: \"ESP1\",\r\n      data: []\r\n    },\r\n    {\r\n      name: \"ESP2\",\r\n      data: []\r\n    },\r\n    {\r\n      name: \"ESP3\",\r\n      data: []\r\n    },\r\n    {\r\n      name: \"ESP4\",\r\n      data: []\r\n    }\r\n  ]\r\n};\r\nvar options2 = {\r\n  chart: {\r\n    type: \"spline\"\r\n  },\r\n  title: {\r\n    text: \"Lumière\",\r\n    x: -20 //center\r\n  },\r\n  xAxis: {\r\n    title: {\r\n      text: \"Heure\"\r\n    },\r\n    type: \"datetime\"\r\n  },\r\n  yAxis: {\r\n    title: {\r\n      text: \"Lumen (Lum)\"\r\n    },\r\n    plotLines: [\r\n      {\r\n        value: 0,\r\n        width: 1,\r\n        color: \"#808080\"\r\n      }\r\n    ]\r\n  },\r\n  tooltip: {\r\n    valueSuffix: \"Lum\"\r\n  },\r\n  legend: {\r\n    layout: \"vertical\",\r\n    align: \"right\",\r\n    verticalAlign: \"middle\",\r\n    borderWidth: 0\r\n  },\r\n  series: [\r\n    {\r\n      name: \"ESP1\",\r\n      data: []\r\n    },\r\n    {\r\n      name: \"ESP2\",\r\n      data: []\r\n    },\r\n    {\r\n      name: \"ESP3\",\r\n      data: []\r\n    },\r\n    {\r\n      name: \"ESP4\",\r\n      data: []\r\n    }\r\n  ]\r\n};\r\nexport default {\r\n  props: {\r\n    which_esps: Array\r\n    ,\r\n    k: Number,\r\n    partsdata: {\r\n      type: Array\r\n    }\r\n  },\r\n\r\n  components: {\r\n    highcharts: Chart\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      node_url: \"\",\r\n      items: [],\r\n      options: options,\r\n      options2: options2,\r\n      listeData: []\r\n    };\r\n  },\r\n  mounted(){\r\n \r\n  },\r\n  methods: {\r\n    start: function() {\r\n      /*    var chart = this.$refs.highcharts.chart;\r\n      chart.credits.update({\r\n        style: {\r\n          color: \"#\" + ((Math.random() * 0xffffff) | 0).toString(16)\r\n        }\r\n      }); */\r\n       for (var i = 0; i < this.which_esps.length; i++) {\r\n          this.process_esp(this.which_esps, i);\r\n        } \r\n     \r\n    },\r\n\r\n    process_esp(which_esps, i) {\r\n      const refreshT = 100000; // Refresh period for chart\r\n      var esp = which_esps[i]; // L'ESP \"a dessiner\"\r\n    \r\n      // Gestion de la temperature\r\n      // premier appel pour eviter de devoir attendre RefreshT\r\n      this.get_samples(\"/esp/temp\", this.options.series[i], esp);\r\n      //calls a function or evaluates an expression at specified\r\n      //intervals (in milliseconds).\r\n      window.setInterval(\r\n        this.get_samples,\r\n        refreshT,\r\n        \"/esp/temp\", // param 1 for get_samples()\r\n        this.options.series[i], // param 2 for get_samples()\r\n        esp\r\n      ); // param 3 for get_samples()\r\n\r\n      // Gestion de la lumiere\r\n      this.get_samples(\"/esp/light\", this.options2.series[i], esp);\r\n      window.setInterval(\r\n        this.get_samples,\r\n        refreshT,\r\n        \"/esp/light\", // URL to GET\r\n        this.options2.series[i], // Serie to fill\r\n        esp\r\n      ); // ESP targeted\r\n    },\r\n\r\n    get_samples(path_on_node, serie, wh) {\r\n      // path_on_node => help to compose url to get on Js node\r\n      // serie => for choosing chart/serie on the page\r\n      // wh => which esp do we want to query data\r\n\r\n      this.node_url = \"http://51.83.77.127:3000\";\r\n\r\n      //https://openclassrooms.com/fr/courses/1567926-un-site-web-dynamique-avec-jquery/1569648-le-fonctionnement-de-ajax\r\n        var liste = []\r\n      let url = this.node_url + path_on_node + \"?who=\" + wh;\r\n      fetch(url)\r\n        .then(responseJSON => {\r\n          return responseJSON.json();\r\n        })\r\n        .then(responseJS => {\r\n          this.items = responseJS;\r\n\r\n          if (this.items) {\r\n            this.items.forEach(function(element) {\r\n                liste.push([Date.parse(element.date), element.value]);\r\n            });\r\n          }\r\n          serie.data = liste;\r\n          \r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n"]}]}