{"remainingRequest":"/mnt/c/Users/Clement/OneDrive/Bureau/IOT REJNERI SELVA NEW/projet-iot-rejneri-selva/projet-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/mnt/c/Users/Clement/OneDrive/Bureau/IOT REJNERI SELVA NEW/projet-iot-rejneri-selva/projet-vue/src/components/Chart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/mnt/c/Users/Clement/OneDrive/Bureau/IOT REJNERI SELVA NEW/projet-iot-rejneri-selva/projet-vue/src/components/Chart.vue","mtime":1587659770181},{"path":"/mnt/c/Users/Clement/OneDrive/Bureau/IOT REJNERI SELVA NEW/projet-iot-rejneri-selva/projet-vue/node_modules/cache-loader/dist/cjs.js","mtime":1587659693373},{"path":"/mnt/c/Users/Clement/OneDrive/Bureau/IOT REJNERI SELVA NEW/projet-iot-rejneri-selva/projet-vue/node_modules/babel-loader/lib/index.js","mtime":1587659692023},{"path":"/mnt/c/Users/Clement/OneDrive/Bureau/IOT REJNERI SELVA NEW/projet-iot-rejneri-selva/projet-vue/node_modules/cache-loader/dist/cjs.js","mtime":1587659693373},{"path":"/mnt/c/Users/Clement/OneDrive/Bureau/IOT REJNERI SELVA NEW/projet-iot-rejneri-selva/projet-vue/node_modules/vue-loader/lib/index.js","mtime":1587659760983}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IENoYXJ0IH0gZnJvbSAiaGlnaGNoYXJ0cy12dWUiOwppbXBvcnQgSGlnaGNoYXJ0cyBmcm9tICJoaWdoY2hhcnRzIjsKaW1wb3J0IGV4cG9ydGluZ0luaXQgZnJvbSAiaGlnaGNoYXJ0cy9tb2R1bGVzL2V4cG9ydGluZyI7CmltcG9ydCBzdG9ja0luaXQgZnJvbSAiaGlnaGNoYXJ0cy9tb2R1bGVzL3N0b2NrIjsKCnN0b2NrSW5pdChIaWdoY2hhcnRzKTsKZXhwb3J0aW5nSW5pdChIaWdoY2hhcnRzKTsKCnZhciBvcHRpb25zID0gewogIGNoYXJ0OiB7CiAgICB0eXBlOiAic3BsaW5lIgogIH0sCiAgdGl0bGU6IHsKICAgIHRleHQ6ICJUZW1wZXJhdHVyZSIsCiAgICB4OiAtMjAgLy9jZW50ZXIKICB9LAogIHhBeGlzOiB7CiAgICB0aXRsZTogewogICAgICB0ZXh0OiAiSGV1cmUiCiAgICB9LAogICAgdHlwZTogImRhdGV0aW1lIgogIH0sCiAgeUF4aXM6IHsKICAgIHRpdGxlOiB7CiAgICAgIHRleHQ6ICJUZW1wZXJhdHVyZSAowrBDKSIKICAgIH0sCiAgICBwbG90TGluZXM6IFsKICAgICAgewogICAgICAgIHZhbHVlOiAwLAogICAgICAgIHdpZHRoOiAxLAogICAgICAgIGNvbG9yOiAiIzgwODA4MCIKICAgICAgfQogICAgXQogIH0sCiAgdG9vbHRpcDogewogICAgdmFsdWVTdWZmaXg6ICLCsEMiCiAgfSwKICBsZWdlbmQ6IHsKICAgIGxheW91dDogInZlcnRpY2FsIiwKICAgIGFsaWduOiAicmlnaHQiLAogICAgdmVydGljYWxBbGlnbjogIm1pZGRsZSIsCiAgICBib3JkZXJXaWR0aDogMAogIH0sCiAgc2VyaWVzOiBbCiAgICB7CiAgICAgIG5hbWU6ICJFU1AxIiwKICAgICAgZGF0YTogW10KICAgIH0sCiAgICB7CiAgICAgIG5hbWU6ICJFU1AyIiwKICAgICAgZGF0YTogW10KICAgIH0sCiAgICB7CiAgICAgIG5hbWU6ICJFU1AzIiwKICAgICAgZGF0YTogW10KICAgIH0sCiAgICB7CiAgICAgIG5hbWU6ICJFU1A0IiwKICAgICAgZGF0YTogW10KICAgIH0KICBdCn07CnZhciBvcHRpb25zMiA9IHsKICBjaGFydDogewogICAgdHlwZTogInNwbGluZSIKICB9LAogIHRpdGxlOiB7CiAgICB0ZXh0OiAiTHVtacOocmUiLAogICAgeDogLTIwIC8vY2VudGVyCiAgfSwKICB4QXhpczogewogICAgdGl0bGU6IHsKICAgICAgdGV4dDogIkhldXJlIgogICAgfSwKICAgIHR5cGU6ICJkYXRldGltZSIKICB9LAogIHlBeGlzOiB7CiAgICB0aXRsZTogewogICAgICB0ZXh0OiAiTHVtZW4gKEx1bSkiCiAgICB9LAogICAgcGxvdExpbmVzOiBbCiAgICAgIHsKICAgICAgICB2YWx1ZTogMCwKICAgICAgICB3aWR0aDogMSwKICAgICAgICBjb2xvcjogIiM4MDgwODAiCiAgICAgIH0KICAgIF0KICB9LAogIHRvb2x0aXA6IHsKICAgIHZhbHVlU3VmZml4OiAiTHVtIgogIH0sCiAgbGVnZW5kOiB7CiAgICBsYXlvdXQ6ICJ2ZXJ0aWNhbCIsCiAgICBhbGlnbjogInJpZ2h0IiwKICAgIHZlcnRpY2FsQWxpZ246ICJtaWRkbGUiLAogICAgYm9yZGVyV2lkdGg6IDAKICB9LAogIHNlcmllczogWwogICAgewogICAgICBuYW1lOiAiRVNQMSIsCiAgICAgIGRhdGE6IFtdCiAgICB9LAogICAgewogICAgICBuYW1lOiAiRVNQMiIsCiAgICAgIGRhdGE6IFtdCiAgICB9LAogICAgewogICAgICBuYW1lOiAiRVNQMyIsCiAgICAgIGRhdGE6IFtdCiAgICB9LAogICAgewogICAgICBuYW1lOiAiRVNQNCIsCiAgICAgIGRhdGE6IFtdCiAgICB9CiAgXQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIHdoaWNoX2VzcHM6IEFycmF5CiAgICAsCiAgICBrOiBOdW1iZXIsCiAgICBwYXJ0c2RhdGE6IHsKICAgICAgdHlwZTogQXJyYXkKICAgIH0KICB9LAoKICBjb21wb25lbnRzOiB7CiAgICBoaWdoY2hhcnRzOiBDaGFydAogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBub2RlX3VybDogIiIsCiAgICAgIGl0ZW1zOiBbXSwKICAgICAgb3B0aW9uczogb3B0aW9ucywKICAgICAgb3B0aW9uczI6IG9wdGlvbnMyLAogICAgICBsaXN0ZURhdGE6IFtdCiAgICB9OwogIH0sCiAgbW91bnRlZCgpewogCiAgfSwKICBtZXRob2RzOiB7CiAgICBzdGFydDogZnVuY3Rpb24oKSB7CiAgICAgIC8qICAgIHZhciBjaGFydCA9IHRoaXMuJHJlZnMuaGlnaGNoYXJ0cy5jaGFydDsKICAgICAgY2hhcnQuY3JlZGl0cy51cGRhdGUoewogICAgICAgIHN0eWxlOiB7CiAgICAgICAgICBjb2xvcjogIiMiICsgKChNYXRoLnJhbmRvbSgpICogMHhmZmZmZmYpIHwgMCkudG9TdHJpbmcoMTYpCiAgICAgICAgfQogICAgICB9KTsgKi8KICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy53aGljaF9lc3BzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0aGlzLnByb2Nlc3NfZXNwKHRoaXMud2hpY2hfZXNwcywgaSk7CiAgICAgICAgfSAKICAgICAKICAgIH0sCgogICAgcHJvY2Vzc19lc3Aod2hpY2hfZXNwcywgaSkgewogICAgICBjb25zdCByZWZyZXNoVCA9IDEwMDAwMDsgLy8gUmVmcmVzaCBwZXJpb2QgZm9yIGNoYXJ0CiAgICAgIHZhciBlc3AgPSB3aGljaF9lc3BzW2ldOyAvLyBMJ0VTUCAiYSBkZXNzaW5lciIKICAgIAogICAgICAvLyBHZXN0aW9uIGRlIGxhIHRlbXBlcmF0dXJlCiAgICAgIC8vIHByZW1pZXIgYXBwZWwgcG91ciBldml0ZXIgZGUgZGV2b2lyIGF0dGVuZHJlIFJlZnJlc2hUCiAgICAgIHRoaXMuZ2V0X3NhbXBsZXMoIi9lc3AvdGVtcCIsIHRoaXMub3B0aW9ucy5zZXJpZXNbaV0sIGVzcCk7CiAgICAgIC8vY2FsbHMgYSBmdW5jdGlvbiBvciBldmFsdWF0ZXMgYW4gZXhwcmVzc2lvbiBhdCBzcGVjaWZpZWQKICAgICAgLy9pbnRlcnZhbHMgKGluIG1pbGxpc2Vjb25kcykuCiAgICAgIHdpbmRvdy5zZXRJbnRlcnZhbCgKICAgICAgICB0aGlzLmdldF9zYW1wbGVzLAogICAgICAgIHJlZnJlc2hULAogICAgICAgICIvZXNwL3RlbXAiLCAvLyBwYXJhbSAxIGZvciBnZXRfc2FtcGxlcygpCiAgICAgICAgdGhpcy5vcHRpb25zLnNlcmllc1tpXSwgLy8gcGFyYW0gMiBmb3IgZ2V0X3NhbXBsZXMoKQogICAgICAgIGVzcAogICAgICApOyAvLyBwYXJhbSAzIGZvciBnZXRfc2FtcGxlcygpCgogICAgICAvLyBHZXN0aW9uIGRlIGxhIGx1bWllcmUKICAgICAgdGhpcy5nZXRfc2FtcGxlcygiL2VzcC9saWdodCIsIHRoaXMub3B0aW9uczIuc2VyaWVzW2ldLCBlc3ApOwogICAgICB3aW5kb3cuc2V0SW50ZXJ2YWwoCiAgICAgICAgdGhpcy5nZXRfc2FtcGxlcywKICAgICAgICByZWZyZXNoVCwKICAgICAgICAiL2VzcC9saWdodCIsIC8vIFVSTCB0byBHRVQKICAgICAgICB0aGlzLm9wdGlvbnMyLnNlcmllc1tpXSwgLy8gU2VyaWUgdG8gZmlsbAogICAgICAgIGVzcAogICAgICApOyAvLyBFU1AgdGFyZ2V0ZWQKICAgIH0sCgogICAgZ2V0X3NhbXBsZXMocGF0aF9vbl9ub2RlLCBzZXJpZSwgd2gpIHsKICAgICAgLy8gcGF0aF9vbl9ub2RlID0+IGhlbHAgdG8gY29tcG9zZSB1cmwgdG8gZ2V0IG9uIEpzIG5vZGUKICAgICAgLy8gc2VyaWUgPT4gZm9yIGNob29zaW5nIGNoYXJ0L3NlcmllIG9uIHRoZSBwYWdlCiAgICAgIC8vIHdoID0+IHdoaWNoIGVzcCBkbyB3ZSB3YW50IHRvIHF1ZXJ5IGRhdGEKCiAgICAgIHRoaXMubm9kZV91cmwgPSAiaHR0cDovL2xvY2FsaG9zdDozMDAwIjsKCiAgICAgIC8vaHR0cHM6Ly9vcGVuY2xhc3Nyb29tcy5jb20vZnIvY291cnNlcy8xNTY3OTI2LXVuLXNpdGUtd2ViLWR5bmFtaXF1ZS1hdmVjLWpxdWVyeS8xNTY5NjQ4LWxlLWZvbmN0aW9ubmVtZW50LWRlLWFqYXgKICAgICAgICB2YXIgbGlzdGUgPSBbXQogICAgICBsZXQgdXJsID0gdGhpcy5ub2RlX3VybCArIHBhdGhfb25fbm9kZSArICI/d2hvPSIgKyB3aDsKICAgICAgZmV0Y2godXJsKQogICAgICAgIC50aGVuKHJlc3BvbnNlSlNPTiA9PiB7CiAgICAgICAgICByZXR1cm4gcmVzcG9uc2VKU09OLmpzb24oKTsKICAgICAgICB9KQogICAgICAgIC50aGVuKHJlc3BvbnNlSlMgPT4gewogICAgICAgICAgdGhpcy5pdGVtcyA9IHJlc3BvbnNlSlM7CgogICAgICAgICAgaWYgKHRoaXMuaXRlbXMpIHsKICAgICAgICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgIGxpc3RlLnB1c2goW0RhdGUucGFyc2UoZWxlbWVudC5kYXRlKSwgZWxlbWVudC52YWx1ZV0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIHNlcmllLmRhdGEgPSBsaXN0ZTsKICAgICAgICAgIAogICAgICAgIH0pOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["Chart.vue"],"names":[],"mappings":";;;;;;;;;;;AAWA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Chart.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <md-button class=\"md-primary md-raised\" @click=\"start\">Start simulation</md-button>\n    <br />\n    <br />\n    <highcharts :options=\"options\" ref=\"highcharts\"></highcharts>\n    <highcharts :options=\"options2\" ref=\"highcharts\"></highcharts>\n  </div>\n</template>\n\n<script>\nimport { Chart } from \"highcharts-vue\";\nimport Highcharts from \"highcharts\";\nimport exportingInit from \"highcharts/modules/exporting\";\nimport stockInit from \"highcharts/modules/stock\";\n\nstockInit(Highcharts);\nexportingInit(Highcharts);\n\nvar options = {\n  chart: {\n    type: \"spline\"\n  },\n  title: {\n    text: \"Temperature\",\n    x: -20 //center\n  },\n  xAxis: {\n    title: {\n      text: \"Heure\"\n    },\n    type: \"datetime\"\n  },\n  yAxis: {\n    title: {\n      text: \"Temperature (°C)\"\n    },\n    plotLines: [\n      {\n        value: 0,\n        width: 1,\n        color: \"#808080\"\n      }\n    ]\n  },\n  tooltip: {\n    valueSuffix: \"°C\"\n  },\n  legend: {\n    layout: \"vertical\",\n    align: \"right\",\n    verticalAlign: \"middle\",\n    borderWidth: 0\n  },\n  series: [\n    {\n      name: \"ESP1\",\n      data: []\n    },\n    {\n      name: \"ESP2\",\n      data: []\n    },\n    {\n      name: \"ESP3\",\n      data: []\n    },\n    {\n      name: \"ESP4\",\n      data: []\n    }\n  ]\n};\nvar options2 = {\n  chart: {\n    type: \"spline\"\n  },\n  title: {\n    text: \"Lumière\",\n    x: -20 //center\n  },\n  xAxis: {\n    title: {\n      text: \"Heure\"\n    },\n    type: \"datetime\"\n  },\n  yAxis: {\n    title: {\n      text: \"Lumen (Lum)\"\n    },\n    plotLines: [\n      {\n        value: 0,\n        width: 1,\n        color: \"#808080\"\n      }\n    ]\n  },\n  tooltip: {\n    valueSuffix: \"Lum\"\n  },\n  legend: {\n    layout: \"vertical\",\n    align: \"right\",\n    verticalAlign: \"middle\",\n    borderWidth: 0\n  },\n  series: [\n    {\n      name: \"ESP1\",\n      data: []\n    },\n    {\n      name: \"ESP2\",\n      data: []\n    },\n    {\n      name: \"ESP3\",\n      data: []\n    },\n    {\n      name: \"ESP4\",\n      data: []\n    }\n  ]\n};\nexport default {\n  props: {\n    which_esps: Array\n    ,\n    k: Number,\n    partsdata: {\n      type: Array\n    }\n  },\n\n  components: {\n    highcharts: Chart\n  },\n\n  data() {\n    return {\n      node_url: \"\",\n      items: [],\n      options: options,\n      options2: options2,\n      listeData: []\n    };\n  },\n  mounted(){\n \n  },\n  methods: {\n    start: function() {\n      /*    var chart = this.$refs.highcharts.chart;\n      chart.credits.update({\n        style: {\n          color: \"#\" + ((Math.random() * 0xffffff) | 0).toString(16)\n        }\n      }); */\n       for (var i = 0; i < this.which_esps.length; i++) {\n          this.process_esp(this.which_esps, i);\n        } \n     \n    },\n\n    process_esp(which_esps, i) {\n      const refreshT = 100000; // Refresh period for chart\n      var esp = which_esps[i]; // L'ESP \"a dessiner\"\n    \n      // Gestion de la temperature\n      // premier appel pour eviter de devoir attendre RefreshT\n      this.get_samples(\"/esp/temp\", this.options.series[i], esp);\n      //calls a function or evaluates an expression at specified\n      //intervals (in milliseconds).\n      window.setInterval(\n        this.get_samples,\n        refreshT,\n        \"/esp/temp\", // param 1 for get_samples()\n        this.options.series[i], // param 2 for get_samples()\n        esp\n      ); // param 3 for get_samples()\n\n      // Gestion de la lumiere\n      this.get_samples(\"/esp/light\", this.options2.series[i], esp);\n      window.setInterval(\n        this.get_samples,\n        refreshT,\n        \"/esp/light\", // URL to GET\n        this.options2.series[i], // Serie to fill\n        esp\n      ); // ESP targeted\n    },\n\n    get_samples(path_on_node, serie, wh) {\n      // path_on_node => help to compose url to get on Js node\n      // serie => for choosing chart/serie on the page\n      // wh => which esp do we want to query data\n\n      this.node_url = \"http://localhost:3000\";\n\n      //https://openclassrooms.com/fr/courses/1567926-un-site-web-dynamique-avec-jquery/1569648-le-fonctionnement-de-ajax\n        var liste = []\n      let url = this.node_url + path_on_node + \"?who=\" + wh;\n      fetch(url)\n        .then(responseJSON => {\n          return responseJSON.json();\n        })\n        .then(responseJS => {\n          this.items = responseJS;\n\n          if (this.items) {\n            this.items.forEach(function(element) {\n                liste.push([Date.parse(element.date), element.value]);\n            });\n          }\n          serie.data = liste;\n          \n        });\n    }\n  }\n};\n</script>\n"]}]}