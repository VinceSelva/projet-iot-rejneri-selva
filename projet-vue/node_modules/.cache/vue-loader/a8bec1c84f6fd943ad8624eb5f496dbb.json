{"remainingRequest":"/mnt/d/NE PAS SUPPRIMER/DOCS/projet-iot-rejneri-selva/projet-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/mnt/d/NE PAS SUPPRIMER/DOCS/projet-iot-rejneri-selva/projet-vue/src/components/Graphiques.vue?vue&type=script&lang=js&","dependencies":[{"path":"/mnt/d/NE PAS SUPPRIMER/DOCS/projet-iot-rejneri-selva/projet-vue/src/components/Graphiques.vue","mtime":1587375796363},{"path":"/mnt/d/NE PAS SUPPRIMER/DOCS/projet-iot-rejneri-selva/projet-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/d/NE PAS SUPPRIMER/DOCS/projet-iot-rejneri-selva/projet-vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/mnt/d/NE PAS SUPPRIMER/DOCS/projet-iot-rejneri-selva/projet-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/mnt/d/NE PAS SUPPRIMER/DOCS/projet-iot-rejneri-selva/projet-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovL3ZhciBIaWdoY2hhcnRzID0gcmVxdWlyZSgiaGlnaGNoYXJ0cyIpOw0KaW1wb3J0IENoYXJ0IGZyb20gIi4vQ2hhcnQiOw0KDQovL2ltcG9ydCBoaWdoY2hhcnRzIGZyb20gJ2h0dHBzOi8vY29kZS5oaWdoY2hhcnRzLmNvbS9oaWdoY2hhcnRzLmpzJw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiR3JhcGhpcXVlcyIsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHN0YXRlczogW10sDQogICAgICBub2RlX3VybDogImh0dHA6Ly81MS44My43Ny4xMjc6MzAwMCIsDQogICAgICB3aGljaF9lc3BzOiBbDQogICAgICAgICIzMDpBRTpBNDo4NjpDMzoyMCIsDQogICAgICAgICIzMDpBRTpBNDo4NjpDQTo3QyIsDQogICAgICAgICIiDQogICAgICBdLA0KICAgICAgbmFtZTogIiIsDQogICAgICBjb21wb25lbnRLZXk6IDANCiAgICB9Ow0KICB9LA0KICBjb21wb25lbnRzOiB7DQogICAgQ2hhcnQNCiAgfSwNCiAgcHJvcHM6IHsNCiAgICBtc2c6IFN0cmluZw0KICB9LA0KICBtb3VudGVkKCkge30sDQoNCiAgbWV0aG9kczogew0KICAgIGFqb3V0TUFDKCkgew0KICAgICAgdmFyIGFkTWFjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIk1BQyIpOw0KICAgICAgY29uc29sZS5sb2coIk1BQzogIiArIGFkTWFjLnZhbHVlKTsNCiAgICAgIHRoaXMud2hpY2hfZXNwc1szXSA9IGFkTWFjLnZhbHVlOw0KICAgICAgY29uc29sZS5sb2codGhpcy53aGljaF9lc3BzKTsNCiAgICAgLy8gdGhpcy5zdGFydCgpOw0KICAgICAgdGhpcy5mb3JjZVJlcmVuZGVyKCk7DQogICAgfSwNCiAgICAgZm9yY2VSZXJlbmRlcigpIHsNCiAgICAgIHRoaXMuY29tcG9uZW50S2V5ICs9IDE7ICANCiAgICB9LA0KICAgIHN0YXJ0OiBmdW5jdGlvbigpIHsNCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy53aGljaF9lc3BzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIHRoaXMuZ2V0U3RhdGVzKCIvZXNwL2xpZ2h0IiwgW10sIHRoaXMud2hpY2hfZXNwc1tpXSk7DQogICAgICB9DQogICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMud2hpY2hfZXNwcy5sZW5ndGg7IGorKykgew0KICAgICAgICB0aGlzLmdldFN0YXRlcygiL2VzcC90ZW1wIiwgW10sIHRoaXMud2hpY2hfZXNwc1tqXSk7DQogICAgICB9DQogICAgfSwNCiAgICBnZXRTdGF0ZXMocGF0aF9vbl9ub2RlLCBzZXJpZSwgd2gpIHsNCiAgICAgIHRoaXMubm9kZV91cmwgPSAiaHR0cDovLzUxLjgzLjc3LjEyNzozMDAwIjsNCg0KICAgICAgLy9odHRwczovL29wZW5jbGFzc3Jvb21zLmNvbS9mci9jb3Vyc2VzLzE1Njc5MjYtdW4tc2l0ZS13ZWItZHluYW1pcXVlLWF2ZWMtanF1ZXJ5LzE1Njk2NDgtbGUtZm9uY3Rpb25uZW1lbnQtZGUtYWpheA0KICAgICAgdmFyIGxpc3RlID0gW107DQogICAgICBsZXQgdXJsID0gdGhpcy5ub2RlX3VybCArIHBhdGhfb25fbm9kZSArICI/d2hvPSIgKyB3aDsNCiAgICAgIGZldGNoKHVybCkNCiAgICAgICAgLnRoZW4ocmVzcG9uc2VKU09OID0+IHsNCiAgICAgICAgICByZXR1cm4gcmVzcG9uc2VKU09OLmpzb24oKTsNCiAgICAgICAgfSkNCiAgICAgICAgLnRoZW4ocmVzcG9uc2VKUyA9PiB7DQogICAgICAgICAgdGhpcy5pdGVtcyA9IHJlc3BvbnNlSlM7DQoNCiAgICAgICAgICBpZiAodGhpcy5pdGVtcykgew0KICAgICAgICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgbGlzdGUucHVzaChbRGF0ZS5wYXJzZShlbGVtZW50LmRhdGUpLCBlbGVtZW50LnZhbHVlXSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9DQogICAgICAgICAgc2VyaWUuZGF0YSA9IGxpc3RlOw0KICAgICAgICB9KTsNCiAgICB9LA0KDQogICAgYXN5bmMgc3dpdGNoU3RhdGUod2gpIHsNCiAgICAgIHZhciB1cmwgPSB0aGlzLm5vZGVfdXJsICsgIi9lc3AvbGVkIjsNCiAgICAgIHZhciBtZXNzYWdlID0gIm9uIjsNCiAgICAgIHZhciBoZWFkZXIgPSBuZXcgSGVhZGVycygpOw0KICAgICAgaGVhZGVyLmFwcGVuZCgiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL2pzb24iKTsNCiAgICAgIGF3YWl0IGZldGNoKHVybCwgew0KICAgICAgICBtZXRob2Q6ICJQT1NUIiwNCiAgICAgICAgaGVhZGVyczogaGVhZGVyLA0KICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7DQogICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSwNCiAgICAgICAgICB3aG86IHdoDQogICAgICAgIH0pDQogICAgICB9KTsNCiAgICB9LA0KDQogICAgYXN5bmMgYWRkRmxvdHRlKHdoKSB7DQogICAgICB0aGlzLndoaWNoX2VzcHMuYXBwZW5kKHdoKTsNCiAgICAgIHZhciB1cmwgPSB0aGlzLm5vZGVfdXJsICsgIi9mbG90dGUiOw0KICAgICAgdmFyIGhlYWRlciA9IG5ldyBIZWFkZXJzKCk7DQogICAgICBoZWFkZXIuYXBwZW5kKCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24vanNvbiIpOw0KICAgICAgYXdhaXQgZmV0Y2godXJsLCB7DQogICAgICAgIG1ldGhvZDogIlBPU1QiLA0KICAgICAgICBoZWFkZXJzOiBoZWFkZXIsDQogICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsNCiAgICAgICAgICB3aG86IHdoDQogICAgICAgIH0pDQogICAgICB9KTsNCiAgICB9DQogIH0NCn07DQo="},{"version":3,"sources":["Graphiques.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Graphiques.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"hello\">\r\n    <h1>{{ msg }}</h1>\r\n    <div id=\"app\">\r\n       <label for=\"MAC\">Adresse MAC:</label>\r\n      <input type=\"text\" id=\"MAC\" name=\"MAC\"><br><br>\r\n      <md-button class=\"md-accent md-raised\" type=\"button\" v-on:click=\"ajoutMAC()\">Ajouter MAC en tant qu'invit√©</md-button>\r\n      <Chart  :k=\"componentKey\" :which_esps= \"which_esps\"/>\r\n    </div>\r\n    <!-- <md-input v-model=\"name\"></md-input>\r\n    <md-button class=\"md-primary md-raised\" v-on:click=\"addFloat(name)\">Add to fleet</md-button>-->\r\n      \r\n    <h1>LED states</h1>\r\n    <md-table>\r\n      <md-table-row slot=\"md-table-row\">\r\n        <md-table-head md-label=\"Name\">ESP</md-table-head>\r\n        <md-table-head md-label=\"Actions\">Action</md-table-head>\r\n      </md-table-row>\r\n      <md-table-row>\r\n        <md-table-cell md-label=\"Name\">30:AE:A4:86:C3:20</md-table-cell>\r\n\r\n        <md-table-cell md-label=\"Actions\">\r\n          <md-button class=\"md-primary md-raised\" v-on:click=\"switchState('30:AE:A4:86:C3:20')\">PING</md-button>\r\n        </md-table-cell>\r\n      </md-table-row>\r\n      <md-table-row>\r\n        <md-table-cell md-label=\"Name\">80:7D:3A:FD:DD:08</md-table-cell>\r\n        <md-table-cell md-label=\"Actions\">\r\n          <md-button class=\"md-primary md-raised\" v-on:click=\"switchState('30:AE:A4:86:C3:20')\">PING</md-button>\r\n        </md-table-cell>\r\n      </md-table-row>\r\n      <md-table-row>\r\n        <md-table-cell md-label=\"Name\">30:AE:A4:86:CA:7C</md-table-cell>\r\n        <md-table-cell md-label=\"Actions\">\r\n          <md-button class=\"md-primary md-raised\" v-on:click=\"switchState('30:AE:A4:86:C3:20')\">PING</md-button>\r\n        </md-table-cell>\r\n      </md-table-row>\r\n      <md-table-row>\r\n        <md-table-cell md-label=\"Name\">{{ which_esps[3] }}</md-table-cell>\r\n        <md-table-cell md-label=\"Actions\">\r\n          <md-button class=\"md-primary md-raised\" v-on:click=\"switchState(which_esps[3])\">PING</md-button>\r\n        </md-table-cell>\r\n      </md-table-row>\r\n    </md-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n//var Highcharts = require(\"highcharts\");\r\nimport Chart from \"./Chart\";\r\n\r\n//import highcharts from 'https://code.highcharts.com/highcharts.js'\r\nexport default {\r\n  name: \"Graphiques\",\r\n  data() {\r\n    return {\r\n      states: [],\r\n      node_url: \"http://51.83.77.127:3000\",\r\n      which_esps: [\r\n        \"30:AE:A4:86:C3:20\",\r\n        \"30:AE:A4:86:CA:7C\",\r\n        \"\"\r\n      ],\r\n      name: \"\",\r\n      componentKey: 0\r\n    };\r\n  },\r\n  components: {\r\n    Chart\r\n  },\r\n  props: {\r\n    msg: String\r\n  },\r\n  mounted() {},\r\n\r\n  methods: {\r\n    ajoutMAC() {\r\n      var adMac = document.getElementById(\"MAC\");\r\n      console.log(\"MAC: \" + adMac.value);\r\n      this.which_esps[3] = adMac.value;\r\n      console.log(this.which_esps);\r\n     // this.start();\r\n      this.forceRerender();\r\n    },\r\n     forceRerender() {\r\n      this.componentKey += 1;  \r\n    },\r\n    start: function() {\r\n      for (var i = 0; i < this.which_esps.length; i++) {\r\n        this.getStates(\"/esp/light\", [], this.which_esps[i]);\r\n      }\r\n      for (var j = 0; j < this.which_esps.length; j++) {\r\n        this.getStates(\"/esp/temp\", [], this.which_esps[j]);\r\n      }\r\n    },\r\n    getStates(path_on_node, serie, wh) {\r\n      this.node_url = \"http://51.83.77.127:3000\";\r\n\r\n      //https://openclassrooms.com/fr/courses/1567926-un-site-web-dynamique-avec-jquery/1569648-le-fonctionnement-de-ajax\r\n      var liste = [];\r\n      let url = this.node_url + path_on_node + \"?who=\" + wh;\r\n      fetch(url)\r\n        .then(responseJSON => {\r\n          return responseJSON.json();\r\n        })\r\n        .then(responseJS => {\r\n          this.items = responseJS;\r\n\r\n          if (this.items) {\r\n            this.items.forEach(function(element) {\r\n              liste.push([Date.parse(element.date), element.value]);\r\n            });\r\n          }\r\n          serie.data = liste;\r\n        });\r\n    },\r\n\r\n    async switchState(wh) {\r\n      var url = this.node_url + \"/esp/led\";\r\n      var message = \"on\";\r\n      var header = new Headers();\r\n      header.append(\"Content-Type\", \"application/json\");\r\n      await fetch(url, {\r\n        method: \"POST\",\r\n        headers: header,\r\n        body: JSON.stringify({\r\n          message: message,\r\n          who: wh\r\n        })\r\n      });\r\n    },\r\n\r\n    async addFlotte(wh) {\r\n      this.which_esps.append(wh);\r\n      var url = this.node_url + \"/flotte\";\r\n      var header = new Headers();\r\n      header.append(\"Content-Type\", \"application/json\");\r\n      await fetch(url, {\r\n        method: \"POST\",\r\n        headers: header,\r\n        body: JSON.stringify({\r\n          who: wh\r\n        })\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n.md-table-head {\r\n  text-align: center;\r\n}\r\n</style>\r\n"]}]}