{"remainingRequest":"/home/debian/iot/projet-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/debian/iot/projet-vue/src/components/Poulailler.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/debian/iot/projet-vue/src/components/Poulailler.vue","mtime":1589708821963},{"path":"/home/debian/iot/projet-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/debian/iot/projet-vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/debian/iot/projet-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/debian/iot/projet-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlBvdWxhaWxsZXIiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1taXhlZC1zcGFjZXMtYW5kLXRhYnMgKi8KICAgICAgICAgIHNlbGVjdGVkOiAnMzA6QUU6QTQ6ODY6QzM6MjAnLAoKICAgICAJcG9udGVFbkNvdXJzOiBmYWxzZSwKICAgICAgaW50ZXJ2YWw6IG51bGwsCiAgICAgIHN0YXRlczogW10sCiAgICAgIGxhc3RUZW1wOiBudWxsLAogICAgICBsYXN0THVtaW5vc2l0ZTogbnVsbCwKICAgICAgZXRhdFBvdWxhaWxsZXI6ICJGZXJtw6kiLAogICAgICBvZXVmczogMCwKICAgICAgbm91cnJpcjogMCwKICAgICAgbm9kZV91cmw6ICJodHRwOi8vNTEuMjEwLjE1LjY3OjMwMDAiLAogICAgICB3aGljaF9lc3BzOiBbCiAgICAgICAgIjMwOkFFOkE0Ojg2OkMzOjIwIiwKICAgICAgICAiMzA6QUU6QTQ6ODY6Q0E6N0MiLAogICAgICAgICIiCiAgICAgIF0sCiAgICBuYW1lOiAiIiwKICAgIGNvbXBvbmVudEtleTogMAogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uICgpIHsKICAgICAgIC8vdGhpcy5nZXRfc3RhdGVzKCIvZXNwL3RlbXAiLCBbXSwgIiIpOwogICAgICAgLy90aGlzLmdldF9zdGF0ZXMoIi9lc3AvbGlnaHQiLCBbXSwgIiIpOwogICAgICAgdGhpcy5wcm9jZXNzX2VzcCgpOwogICAgfSwKICBjb21wb25lbnRzOiB7CiAgICAKICB9LAogIHByb3BzOiB7CiAgICBtc2c6IFN0cmluZwogIH0sCiBtb3VudGVkKCkgewogICAgaWYgKGxvY2FsU3RvcmFnZS5vZXVmcykgewogICAgICB0aGlzLm9ldWZzID0gbG9jYWxTdG9yYWdlLm9ldWZzOwogICAgfQogICAgaWYgKGxvY2FsU3RvcmFnZS5ub3VycmlyKSB7CiAgICAgIHRoaXMubm91cnJpciA9IGxvY2FsU3RvcmFnZS5ub3VycmlyOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIG9ldWZzKG5ld05hbWUpIHsKICAgICAgbG9jYWxTdG9yYWdlLm9ldWZzID0gbmV3TmFtZTsKICAgIH0sCiAgICBub3VycmlyKG5ld05hbWUpIHsKICAgICAgbG9jYWxTdG9yYWdlLm5vdXJyaXIgPSBuZXdOYW1lOwogICAgfQogIH0sIAogIG1ldGhvZHM6IHsKICAgIHN0YXJ0OiBmdW5jdGlvbigpIHsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLndoaWNoX2VzcHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLmdldF9zdGF0ZXMoIi9lc3AvbGlnaHQiLCBbXSwgdGhpcy53aGljaF9lc3BzW2ldKTsKICAgICAgfQogICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMud2hpY2hfZXNwcy5sZW5ndGg7IGorKykgewogICAgICAgIHRoaXMuZ2V0X3N0YXRlcygiL2VzcC90ZW1wIiwgW10sIHRoaXMud2hpY2hfZXNwc1tqXSk7CiAgICAgIH0KICAgICAgLypmb3IgKHZhciBrID0gMDsgayA8IDIwOyBqKyspIHsKICAgICAgICBub3VycmlyKys7CiAgICAgIH0qLwogICAgfSwKCiAgICBkZWJ1dFBvbnRlKCkgewogICAgICBpZiAodGhpcy5wb250ZUVuQ291cnMpIHsKICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCh0aGlzLnBvbnRlT2ssIDMwMDAwKTsKICAgICAgfQogICAgICB0aGlzLnBvbnRlRW5Db3VycyA9ICF0aGlzLnBvbnRlRW5Db3VycwogICAgfSwKICAgIHBvbnRlT2soKSB7CiAgICAgIHRoaXMub2V1ZnMgPSBwYXJzZUludCh0aGlzLm9ldWZzKSArIDE7CiAgICB9LAoKICAgIGRlYnV0Tm91cnJpcigpIHsKICAgICAgaWYgKHRoaXMubm91cnJpckVuQ291cnMpIHsKICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCh0aGlzLm5vdXJyaXJPSywgMzAwMDApOwogICAgICB9CiAgICAgIHRoaXMubm91cnJpckVuQ291cnMgPSAhdGhpcy5ub3VycmlyRW5Db3VycwogICAgfSwKICAgIG5vdXJyaXJPSygpIHsKICAgICAgdGhpcy5ub3VycmlyID0gcGFyc2VJbnQodGhpcy5ub3VycmlyKSArIDE7CiAgICB9LAoKICAgIGFzeW5jIHN3aXRjaFN0YXRlKHdoKSB7CiAgICAgIHZhciB1cmwgPSB0aGlzLm5vZGVfdXJsICsgIi9lc3AvbGVkIjsKICAgICAgdmFyIG1lc3NhZ2UgPSAib24iOwogICAgICB2YXIgaGVhZGVyID0gbmV3IEhlYWRlcnMoKTsKICAgICAgaGVhZGVyLmFwcGVuZCgiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL2pzb24iKTsKICAgICAgYXdhaXQgZmV0Y2godXJsLCB7CiAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgaGVhZGVyczogaGVhZGVyLAogICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsCiAgICAgICAgICB3aG86IHdoCiAgICAgICAgfSkKICAgICAgfSk7CiAgICB9LAogICAgcHJvY2Vzc19lc3AoKSB7CiAgICAgIGNvbnN0IHJlZnJlc2hUID0gNTAwMDsgLy8gUmVmcmVzaCBwZXJpb2QgZm9yIGNoYXJ0CiAgICAgIHZhciBlc3AgPSAiMzA6QUU6QTQ6ODY6QzM6MjAiOwogICAgICAvL3ZhciBlc3AgPSB3aGljaF9lc3BzW2ldOyAvLyBMJ0VTUCAiYSBkZXNzaW5lciIKCiAgICAgIC8vIEdlc3Rpb24gZGUgbGEgdGVtcGVyYXR1cmUKICAgICAgLy8gcHJlbWllciBhcHBlbCBwb3VyIGV2aXRlciBkZSBkZXZvaXIgYXR0ZW5kcmUgUmVmcmVzaFQKICAgICAgdGhpcy5nZXRfc3RhdGVzKCIvZXNwL3RlbXAiLDAsIGVzcCk7CiAgICAgIC8vY2FsbHMgYSBmdW5jdGlvbiBvciBldmFsdWF0ZXMgYW4gZXhwcmVzc2lvbiBhdCBzcGVjaWZpZWQKICAgICAgLy9pbnRlcnZhbHMgKGluIG1pbGxpc2Vjb25kcykuCiAgICAgIHdpbmRvdy5zZXRJbnRlcnZhbCgKICAgICAgICB0aGlzLmdldF9zdGF0ZXMsCiAgICAgICAgcmVmcmVzaFQsCiAgICAgICAgIi9lc3AvdGVtcCIsIC8vIHBhcmFtIDEgZm9yIGdldF9zYW1wbGVzKCkKICAgICAgICAwLCAvLyBwYXJhbSAyIGZvciBnZXRfc2FtcGxlcygpCiAgICAgICAgZXNwCiAgICAgICk7IC8vIHBhcmFtIDMgZm9yIGdldF9zYW1wbGVzKCkKCiAgICAgIC8vIEdlc3Rpb24gZGUgbGEgbHVtaWVyZQogICAgICB0aGlzLmdldF9zdGF0ZXMoIi9lc3AvbGlnaHQiLCAwLCBlc3ApOwogICAgICB3aW5kb3cuc2V0SW50ZXJ2YWwoCiAgICAgICAgdGhpcy5nZXRfc3RhdGVzLAogICAgICAgIHJlZnJlc2hULAogICAgICAgICIvZXNwL2xpZ2h0IiwgLy8gVVJMIHRvIEdFVAogICAgICAgIDAsIC8vIFNlcmllIHRvIGZpbGwKICAgICAgICBlc3AKICAgICAgKTsgLy8gRVNQIHRhcmdldGVkCiAgICB9LAogICAgbGFzdFZhbHVlKHBhdGgsIHZhbCl7CiAgICAgICBpZihwYXRoID09ICIvZXNwL3RlbXAiKXsKICAgICAgICAgICAgICAgICAgICAgIC8vZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInRlbXAiKS5pbm5lckhUTUwgPSAiTGEgVGVtcMOpcmF0dXJlIGVzdCBkZSAiICsgdmFsICsgIsKwQyI7CiAgICAgICAgICAgIHRoaXMubGFzdFRlbXAgPSB2YWw7CiAgICAgICB9CiAgICAgICBpZihwYXRoID09ICIvZXNwL2xpZ2h0Iil7CiAgICAgICAgICAgICAgICAgICAgICAvL2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJsaWdodCIpLmlubmVySFRNTCA9ICJMYSBMdW1pZXJlIGVzdCBkZSAiICsgdmFsICsgIiBsdW1lbiI7CiAgICAgICAgICAgIHRoaXMubGFzdEx1bWlub3NpdGUgPSB2YWw7CiAgICAgICB9CiAgICAgICB0aGlzLnRlc3QocGF0aCwgdmFsKTsKICAgICAgIC8vY29uc29sZS5sb2coIkxhc3QgIiArIHBhdGggKyAiIDogIiArIHZhbCk7CiAgICB9LAoKICAgIC8qZ2V0X3N0YXRlcyhwYXRoX29uX25vZGUsIHNlcmllLCB3aCkgewoKICAgICAgdGhpcy5ub2RlX3VybCA9ICJodHRwOi8vNTEuODMuNzcuMTI3OjMwMDAiOwoKICAgICAgdmFyIGxpc3RlID0gW10KICAgICAgd2ggPSAiMzA6QUU6QTQ6ODY6Q0E6N0MiOwogICAgICBsZXQgdXJsID0gdGhpcy5ub2RlX3VybCArIHBhdGhfb25fbm9kZSArICI/d2hvPSIgKyB3aDsKICAgICAgZmV0Y2godXJsKQogICAgICAgIC50aGVuKHJlc3BvbnNlSlNPTiA9PiB7CiAgICAgICAgICByZXR1cm4gcmVzcG9uc2VKU09OLmpzb24oKTsKICAgICAgICB9KQogICAgICAgIC50aGVuKHJlc3BvbnNlSlMgPT4gewogICAgICAgICAgdGhpcy5pdGVtcyA9IHJlc3BvbnNlSlM7CgogICAgICAgICAgaWYgKHRoaXMuaXRlbXMpIHsKICAgICAgICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgIGxpc3RlLnB1c2goW0RhdGUucGFyc2UoZWxlbWVudC5kYXRlKSwgZWxlbWVudC52YWx1ZV0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmKGxpc3RlICE9PSB1bmRlZmluZWQpewogICAgICAgICAgCXRoaXMubGFzdFZhbHVlKHBhdGhfb25fbm9kZSwobGlzdGVbKGxpc3RlLmxlbmd0aC0xKV1bMV0pKTsKICAgICAgICAgIH0KCiAgICAgICAgfSk7CiAgICB9LCovCiAgICBnZXRfc3RhdGVzKHBhdGhfb25fbm9kZSwgc2VyaWUsIHdoKSB7CgogICAgICB0aGlzLm5vZGVfdXJsID0gImh0dHA6Ly81MS4yMTAuMTUuNjc6MzAwMCI7CgogICAgICB2YXIgbGlzdGUgPSBbXQogICAgICAvL3doID0gIjMwOkFFOkE0Ojg2OkMzOjIwIjsKICAgICAgd2ggPSB0aGlzLnNlbGVjdGVkOwogICAgICBsZXQgdXJsID0gdGhpcy5ub2RlX3VybCArIHBhdGhfb25fbm9kZSArICI/d2hvPSIgKyB3aDsKICAgICAgZmV0Y2godXJsKQogICAgICAgIC50aGVuKHJlc3BvbnNlSlNPTiA9PiB7CiAgICAgICAgICByZXR1cm4gcmVzcG9uc2VKU09OLmpzb24oKTsKICAgICAgICB9KQogICAgICAgIC50aGVuKHJlc3BvbnNlSlMgPT4gewogICAgICAgICAgdGhpcy5pdGVtcyA9IHJlc3BvbnNlSlM7CgogICAgICAgICAgaWYgKHRoaXMuaXRlbXMpIHsKICAgICAgICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgIGxpc3RlLnB1c2goW0RhdGUucGFyc2UoZWxlbWVudC5kYXRlKSwgZWxlbWVudC52YWx1ZV0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIC8vY29uc29sZS5sb2coIkxpc3RlIitsaXN0ZSk7CiAgICAgICAgICBpZihsaXN0ZSAhPT0gdW5kZWZpbmVkKQogICAgICAgICAgICB0aGlzLmxhc3RWYWx1ZShwYXRoX29uX25vZGUsKGxpc3RlWyhsaXN0ZS5sZW5ndGggLSAxKV1bMV0pKTsKCiAgICAgICAgfSk7CiAgICB9LAogICAgb3V2ZXJ0dXJlUG91bGFpbGxlcigpewogICAgICAgIHRoaXMuZXRhdFBvdWxhaWxsZXIgPSAiT3V2ZXJ0IjsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicG91bGFpbGxlck91dmVydCIpLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJzsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicG91bGFpbGxlckZlcm1lZSIpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICB9LAogICAgZmVybWV0dXJlUG91bGFpbGxlcigpewogICAgICAgIHRoaXMuZXRhdFBvdWxhaWxsZXIgPSAiRmVybcOpIjsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicG91bGFpbGxlckZlcm1lZSIpLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJzsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicG91bGFpbGxlck91dmVydCIpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICB9LAogICAgdGVzdChwYXRoLCB2YWwpewogICAgICAvL2NvbnNvbGUuLy9sb2coInRlc3QgIiArIHBhdGggKyAiIDogIiArIHZhbCk7CgogICAgICBpZihwYXRoID09ICIvZXNwL2xpZ2h0IiAmJiB2YWwgPj0gMTAwMCl7CiAgICAgICAgLy90aGlzLmV0YXRWb2xldCA9ICJPdXZlcnQiOwogICAgICAgIC8vY29uc29sZS5sb2coIk91dnJpciBwaXNjaW5lIik7CiAgICAgICAgdGhpcy5vdXZlcnR1cmVQb3VsYWlsbGVyKCk7CiAgICAgIH0KICAgICAgZWxzZSBpZiAocGF0aCA9PSAiL2VzcC9saWdodCIgJiYgdmFsIDwgMTAwMCl7CiAgICAgICAgLy90aGlzLmV0YXRWb2xldCA9ICJGZXJtw6kiOwogICAgICAgIC8vY29uc29sZS5sb2coIkZlcm3DqSBwaXNjaW5lIik7CiAgICAgICAgdGhpcy5mZXJtZXR1cmVQb3VsYWlsbGVyKCk7CiAgICAgIH0KICAgIH0sCgoKCgogIH0KfTsK"},{"version":3,"sources":["Poulailler.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA","file":"Poulailler.vue","sourceRoot":"src/components","sourcesContent":["<!--Vue representant la page Poulailler-->\n<template>\n  <div>\n    <h1> Bienvenue sur le poulailler</h1>\n      <div id=\"Poulailler\">\n        <div class=\"contentPoulailler\">\n          <p>Voici votre page Poulailler.\n            Ici vous avez accès à la température à l'intérieur du poulailler, ainsi que la luminosité ambiante.\n          </p>\n          <p>\n            Votre poulailler se ferme automatiquement le soir quand la luminosité baisse, et il s'ouvre le matin au levé du soleil. Au moins les poules ne restent pas enfermé toutes la journée.\n            Le deuxième bouton permet d'allumer une lampe si vous voulez allez voir le poulailler la nuit.\n          </p>\n          <p>\n            De plus, vous pouvez depuis cette page nourrir les poules à n'importe quel moment et n'importe où.\n            Vous avez aussi la possibilité de démarrer la ponte automatique des oeufs, ce qui forcera les poules à pondre toutes les 30 minutes.\n          </p>\n\n          <hr>\n             <p> Gestion du poulailler </p>\n    <label style=\"margin-left: 300px;\" class=\"switch\">\n      <input class=\"switch-input\" type=\"checkbox\" v-on:click=\"switchState('30:AE:A4:86:C3:20')\"/>\n      <span class=\"switch-label\" data-on=\"On\" data-off=\"Off\"></span> \n      <span class=\"switch-handle\"></span> \n    </label>\n        <!--<md-button class=\"md-primary md-raised\" v-on:click=\"ouverturePoulailler()\">Ouvrir le poulailler</md-button>\n        <br>\n        <md-button class=\"md-primary md-raised\" v-on:click=\"fermeturePoulailler()\">Fermer le poulailler</md-button>-->\n        <p>Etat du poulailler : {{etatPoulailler}}</p>\n        <img id=\"poulaillerOuvert\" height=\"500px\" width=\"500px\" src=\"../assets/poulailler-jour.jpg\" alt=\"poulailler-jour\" style=\"display: none;\">\n         <img id=\"poulaillerFermee\" height=\"500px\" width=\"500px\" src=\"../assets/poulailler-nuit.jpg\" alt=\"poulailler-jour\" style=\"display: inline;\">\n\n        </div>\n        <div class=\"infoPoulailler\">\n\n\n        <p>Devenez membre en adhérant !</p>\n\t\t <label for=\"macPoulailler\">Votre adresse MAC : </label>\n\t\t   <input type=\"text\" id=\"macPoulailler\" name=\"macPoulailler\" v-model=\"selected\">\n\n\n     \t<!-- <md-select style=\"width: 30%; margin: auto; padding: 15px;\" v-model=\"selected\">\n\t\t  <md-option value=\"30:AE:A4:86:C3:20\">30:AE:A4:86:C3:20</md-option>\n\t\t  <md-option value=\"30:AE:A4:86:CA:7C\">30:AE:A4:86:CA:7C</md-option>\n\t\t  <md-option value=\"testVincent\">{{ testVincent }}</md-option>\n\t\t</md-select>\n\t\t<span>Adresse MAC selected : {{ selected }}</span> -->\n\n          <p id=\"temp\">Température : <span id=\"valeur\">{{lastTemp}}</span> °C</p>\n          <p id=\"lum\">Luminosité : <span id=\"valeur\">{{lastLuminosite}}</span> Lum</p>\n\n          <div><hr></div>\n\n         <p> Gestion de la nourriture  </p>\n          <md-button class=\"md-primary md-raised\" v-on:click=\"debutNourrir()\">Nourrir les poules automatiquement</md-button>\n         <p>Les poules ont été nourrit {{ nourrir }} fois.</p>\n\n        <p> Gestion des œufs  </p>\n        <md-button class=\"md-primary md-raised\" v-on:click=\"debutPonte()\">Debuter la ponte automatique</md-button>\n        <p>Nombre d'oeufs pondus : {{ oeufs }}</p>\n\n\n\n        </div>\n      </div>\n     </div>\n</template>\n\n<script>\n\nexport default {\n  name: \"Poulailler\",\n  data() {\n    return {\n      /* eslint-disable no-mixed-spaces-and-tabs */\n          selected: '30:AE:A4:86:C3:20',\n\n     \tponteEnCours: false,\n      interval: null,\n      states: [],\n      lastTemp: null,\n      lastLuminosite: null,\n      etatPoulailler: \"Fermé\",\n      oeufs: 0,\n      nourrir: 0,\n      node_url: \"http://51.210.15.67:3000\",\n      which_esps: [\n        \"30:AE:A4:86:C3:20\",\n        \"30:AE:A4:86:CA:7C\",\n        \"\"\n      ],\n    name: \"\",\n    componentKey: 0\n    };\n  },\n  created: function () {\n       //this.get_states(\"/esp/temp\", [], \"\");\n       //this.get_states(\"/esp/light\", [], \"\");\n       this.process_esp();\n    },\n  components: {\n    \n  },\n  props: {\n    msg: String\n  },\n mounted() {\n    if (localStorage.oeufs) {\n      this.oeufs = localStorage.oeufs;\n    }\n    if (localStorage.nourrir) {\n      this.nourrir = localStorage.nourrir;\n    }\n  },\n  watch: {\n    oeufs(newName) {\n      localStorage.oeufs = newName;\n    },\n    nourrir(newName) {\n      localStorage.nourrir = newName;\n    }\n  }, \n  methods: {\n    start: function() {\n      for (var i = 0; i < this.which_esps.length; i++) {\n        this.get_states(\"/esp/light\", [], this.which_esps[i]);\n      }\n      for (var j = 0; j < this.which_esps.length; j++) {\n        this.get_states(\"/esp/temp\", [], this.which_esps[j]);\n      }\n      /*for (var k = 0; k < 20; j++) {\n        nourrir++;\n      }*/\n    },\n\n    debutPonte() {\n      if (this.ponteEnCours) {\n        clearInterval(this.interval);\n      } else {\n        this.interval = setInterval(this.ponteOk, 30000);\n      }\n      this.ponteEnCours = !this.ponteEnCours\n    },\n    ponteOk() {\n      this.oeufs = parseInt(this.oeufs) + 1;\n    },\n\n    debutNourrir() {\n      if (this.nourrirEnCours) {\n        clearInterval(this.interval);\n      } else {\n        this.interval = setInterval(this.nourrirOK, 30000);\n      }\n      this.nourrirEnCours = !this.nourrirEnCours\n    },\n    nourrirOK() {\n      this.nourrir = parseInt(this.nourrir) + 1;\n    },\n\n    async switchState(wh) {\n      var url = this.node_url + \"/esp/led\";\n      var message = \"on\";\n      var header = new Headers();\n      header.append(\"Content-Type\", \"application/json\");\n      await fetch(url, {\n        method: \"POST\",\n        headers: header,\n        body: JSON.stringify({\n          message: message,\n          who: wh\n        })\n      });\n    },\n    process_esp() {\n      const refreshT = 5000; // Refresh period for chart\n      var esp = \"30:AE:A4:86:C3:20\";\n      //var esp = which_esps[i]; // L'ESP \"a dessiner\"\n\n      // Gestion de la temperature\n      // premier appel pour eviter de devoir attendre RefreshT\n      this.get_states(\"/esp/temp\",0, esp);\n      //calls a function or evaluates an expression at specified\n      //intervals (in milliseconds).\n      window.setInterval(\n        this.get_states,\n        refreshT,\n        \"/esp/temp\", // param 1 for get_samples()\n        0, // param 2 for get_samples()\n        esp\n      ); // param 3 for get_samples()\n\n      // Gestion de la lumiere\n      this.get_states(\"/esp/light\", 0, esp);\n      window.setInterval(\n        this.get_states,\n        refreshT,\n        \"/esp/light\", // URL to GET\n        0, // Serie to fill\n        esp\n      ); // ESP targeted\n    },\n    lastValue(path, val){\n       if(path == \"/esp/temp\"){\n                      //document.getElementById(\"temp\").innerHTML = \"La Température est de \" + val + \"°C\";\n            this.lastTemp = val;\n       }\n       if(path == \"/esp/light\"){\n                      //document.getElementById(\"light\").innerHTML = \"La Lumiere est de \" + val + \" lumen\";\n            this.lastLuminosite = val;\n       }\n       this.test(path, val);\n       //console.log(\"Last \" + path + \" : \" + val);\n    },\n\n    /*get_states(path_on_node, serie, wh) {\n\n      this.node_url = \"http://51.83.77.127:3000\";\n\n      var liste = []\n      wh = \"30:AE:A4:86:CA:7C\";\n      let url = this.node_url + path_on_node + \"?who=\" + wh;\n      fetch(url)\n        .then(responseJSON => {\n          return responseJSON.json();\n        })\n        .then(responseJS => {\n          this.items = responseJS;\n\n          if (this.items) {\n            this.items.forEach(function(element) {\n                liste.push([Date.parse(element.date), element.value]);\n            });\n          }\n          if(liste !== undefined){\n          \tthis.lastValue(path_on_node,(liste[(liste.length-1)][1]));\n          }\n\n        });\n    },*/\n    get_states(path_on_node, serie, wh) {\n\n      this.node_url = \"http://51.210.15.67:3000\";\n\n      var liste = []\n      //wh = \"30:AE:A4:86:C3:20\";\n      wh = this.selected;\n      let url = this.node_url + path_on_node + \"?who=\" + wh;\n      fetch(url)\n        .then(responseJSON => {\n          return responseJSON.json();\n        })\n        .then(responseJS => {\n          this.items = responseJS;\n\n          if (this.items) {\n            this.items.forEach(function(element) {\n                liste.push([Date.parse(element.date), element.value]);\n            });\n          }\n          //console.log(\"Liste\"+liste);\n          if(liste !== undefined)\n            this.lastValue(path_on_node,(liste[(liste.length - 1)][1]));\n\n        });\n    },\n    ouverturePoulailler(){\n        this.etatPoulailler = \"Ouvert\";\n        document.getElementById(\"poulaillerOuvert\").style.display = 'inline';\n        document.getElementById(\"poulaillerFermee\").style.display = 'none';\n    },\n    fermeturePoulailler(){\n        this.etatPoulailler = \"Fermé\";\n        document.getElementById(\"poulaillerFermee\").style.display = 'inline';\n        document.getElementById(\"poulaillerOuvert\").style.display = 'none';\n    },\n    test(path, val){\n      //console.//log(\"test \" + path + \" : \" + val);\n\n      if(path == \"/esp/light\" && val >= 1000){\n        //this.etatVolet = \"Ouvert\";\n        //console.log(\"Ouvrir piscine\");\n        this.ouverturePoulailler();\n      }\n      else if (path == \"/esp/light\" && val < 1000){\n        //this.etatVolet = \"Fermé\";\n        //console.log(\"Fermé piscine\");\n        this.fermeturePoulailler();\n      }\n    },\n\n\n\n\n  }\n};\n</script>\n\n<style>\n\nh1{\n  font-size: 40px;\n}\n#valeur{\n  font-weight: bold;\n}\n.contentPoulailler{\n  font-size:20px;\n  float: left;\n  width: 50%;\n  padding-left: 5%;\n}\n.infoPoulailler{\n  font-size: 20px;\n  float: right;\n  width: 50%;\n}\n#temp, #lum{\n  background: #448aff;\n  padding:20px;\n  color:white;\n  border-radius: 5px;\n  margin-left: 5%;\n  margin-right: 5%;\n}\n\n\n.contentPoulailler{\n  font-size: 18px;\n  text-align: center;\n}\n</style>"]}]}