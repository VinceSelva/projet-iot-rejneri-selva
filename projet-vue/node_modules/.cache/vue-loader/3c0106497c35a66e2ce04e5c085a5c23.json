{"remainingRequest":"/mnt/c/Users/Clement/OneDrive/Bureau/IOT REJNERI SELVA NEW/projet-iot-rejneri-selva/projet-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/mnt/c/Users/Clement/OneDrive/Bureau/IOT REJNERI SELVA NEW/projet-iot-rejneri-selva/projet-vue/src/components/Graphiques.vue?vue&type=script&lang=js&","dependencies":[{"path":"/mnt/c/Users/Clement/OneDrive/Bureau/IOT REJNERI SELVA NEW/projet-iot-rejneri-selva/projet-vue/src/components/Graphiques.vue","mtime":1587729366634},{"path":"/mnt/c/Users/Clement/OneDrive/Bureau/IOT REJNERI SELVA NEW/projet-iot-rejneri-selva/projet-vue/node_modules/cache-loader/dist/cjs.js","mtime":1587659693373},{"path":"/mnt/c/Users/Clement/OneDrive/Bureau/IOT REJNERI SELVA NEW/projet-iot-rejneri-selva/projet-vue/node_modules/babel-loader/lib/index.js","mtime":1587659692023},{"path":"/mnt/c/Users/Clement/OneDrive/Bureau/IOT REJNERI SELVA NEW/projet-iot-rejneri-selva/projet-vue/node_modules/cache-loader/dist/cjs.js","mtime":1587659693373},{"path":"/mnt/c/Users/Clement/OneDrive/Bureau/IOT REJNERI SELVA NEW/projet-iot-rejneri-selva/projet-vue/node_modules/vue-loader/lib/index.js","mtime":1587659760983}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vdmFyIEhpZ2hjaGFydHMgPSByZXF1aXJlKCJoaWdoY2hhcnRzIik7CmltcG9ydCBDaGFydCBmcm9tICIuL0NoYXJ0IjsKCi8vaW1wb3J0IGhpZ2hjaGFydHMgZnJvbSAnaHR0cHM6Ly9jb2RlLmhpZ2hjaGFydHMuY29tL2hpZ2hjaGFydHMuanMnCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiR3JhcGhpcXVlcyIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHN0YXRlczogW10sCiAgICAgIG5vZGVfdXJsOiAiaHR0cDovL2xvY2FsaG9zdDozMDAwIiwKICAgICAgd2hpY2hfZXNwczogWwogICAgICAgICIzMDpBRTpBNDo4NjpDMzoyMCIsCiAgICAgICAgIjMwOkFFOkE0Ojg2OkNBOjdDIiwKICAgICAgICAiIgogICAgICBdLAogICAgICBuYW1lOiAiIiwKICAgICAgY29tcG9uZW50S2V5OiAwCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgQ2hhcnQKICB9LAogIHByb3BzOiB7CiAgICBtc2c6IFN0cmluZwogIH0sCiAgbW91bnRlZCgpIHt9LAoKICBtZXRob2RzOiB7CiAgICBham91dE1BQygpIHsKICAgICAgdmFyIGFkTWFjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIk1BQyIpOwogICAgICBjb25zb2xlLmxvZygiTUFDOiAiICsgYWRNYWMudmFsdWUpOwogICAgICB0aGlzLndoaWNoX2VzcHNbM10gPSBhZE1hYy52YWx1ZTsKICAgICAgY29uc29sZS5sb2codGhpcy53aGljaF9lc3BzKTsKICAgICAvLyB0aGlzLnN0YXJ0KCk7CiAgICAgIHRoaXMuZm9yY2VSZXJlbmRlcigpOwogICAgfSwKICAgICBmb3JjZVJlcmVuZGVyKCkgewogICAgICB0aGlzLmNvbXBvbmVudEtleSArPSAxOyAgCiAgICB9LAogICAgc3RhcnQ6IGZ1bmN0aW9uKCkgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMud2hpY2hfZXNwcy5sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMuZ2V0U3RhdGVzKCIvZXNwL2xpZ2h0IiwgW10sIHRoaXMud2hpY2hfZXNwc1tpXSk7CiAgICAgIH0KICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLndoaWNoX2VzcHMubGVuZ3RoOyBqKyspIHsKICAgICAgICB0aGlzLmdldFN0YXRlcygiL2VzcC90ZW1wIiwgW10sIHRoaXMud2hpY2hfZXNwc1tqXSk7CiAgICAgIH0KICAgIH0sCiAgICBnZXRTdGF0ZXMocGF0aF9vbl9ub2RlLCBzZXJpZSwgd2gpIHsKICAgICAgdGhpcy5ub2RlX3VybCA9ICJodHRwOi8vbG9jYWxob3N0OjMwMDAiOwoKICAgICAgLy9odHRwczovL29wZW5jbGFzc3Jvb21zLmNvbS9mci9jb3Vyc2VzLzE1Njc5MjYtdW4tc2l0ZS13ZWItZHluYW1pcXVlLWF2ZWMtanF1ZXJ5LzE1Njk2NDgtbGUtZm9uY3Rpb25uZW1lbnQtZGUtYWpheAogICAgICB2YXIgbGlzdGUgPSBbXTsKICAgICAgbGV0IHVybCA9IHRoaXMubm9kZV91cmwgKyBwYXRoX29uX25vZGUgKyAiP3dobz0iICsgd2g7CiAgICAgIGZldGNoKHVybCkKICAgICAgICAudGhlbihyZXNwb25zZUpTT04gPT4gewogICAgICAgICAgcmV0dXJuIHJlc3BvbnNlSlNPTi5qc29uKCk7CiAgICAgICAgfSkKICAgICAgICAudGhlbihyZXNwb25zZUpTID0+IHsKICAgICAgICAgIHRoaXMuaXRlbXMgPSByZXNwb25zZUpTOwoKICAgICAgICAgIGlmICh0aGlzLml0ZW1zKSB7CiAgICAgICAgICAgIHRoaXMuaXRlbXMuZm9yRWFjaChmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgbGlzdGUucHVzaChbRGF0ZS5wYXJzZShlbGVtZW50LmRhdGUpLCBlbGVtZW50LnZhbHVlXSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgc2VyaWUuZGF0YSA9IGxpc3RlOwogICAgICAgIH0pOwogICAgfSwKCiAgICBhc3luYyBzd2l0Y2hTdGF0ZSh3aCkgewogICAgICB2YXIgdXJsID0gdGhpcy5ub2RlX3VybCArICIvZXNwL2xlZCI7CiAgICAgIHZhciBtZXNzYWdlID0gIm9uIjsKICAgICAgdmFyIGhlYWRlciA9IG5ldyBIZWFkZXJzKCk7CiAgICAgIGhlYWRlci5hcHBlbmQoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi9qc29uIik7CiAgICAgIGF3YWl0IGZldGNoKHVybCwgewogICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgIGhlYWRlcnM6IGhlYWRlciwKICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLAogICAgICAgICAgd2hvOiB3aAogICAgICAgIH0pCiAgICAgIH0pOwogICAgfSwKCiAgICBhc3luYyBhZGRGbG90dGUod2gpIHsKICAgICAgdGhpcy53aGljaF9lc3BzLmFwcGVuZCh3aCk7CiAgICAgIHZhciB1cmwgPSB0aGlzLm5vZGVfdXJsICsgIi9mbG90dGUiOwogICAgICB2YXIgaGVhZGVyID0gbmV3IEhlYWRlcnMoKTsKICAgICAgaGVhZGVyLmFwcGVuZCgiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL2pzb24iKTsKICAgICAgYXdhaXQgZmV0Y2godXJsLCB7CiAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgaGVhZGVyczogaGVhZGVyLAogICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgIHdobzogd2gKICAgICAgICB9KQogICAgICB9KTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["Graphiques.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Graphiques.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"hello\">\n    <h1> Bienvenue sur les graphiques </h1>\n      <div id=\"Graphique\">\n        <div class=\"contentGraphique\">\n          <p>Voici votre page Poulailler.\n            Ici vous avez accès à la température à l'intérieur du poulailler, ainsi que la luminosité ambiante.\n          </p>\n          <p>\n            Grâce aux boutons ci-dessous, vous pouvez fermer le poulailler de manière manuelle. Dans tous les cas, votre poulailler se ferme le soir quand la luminosité baisse, et il s'ouvre le matin au levé du soleil. Au moins les poules ne restent pas enfermé toutes la journée.\n            Le deuxième bouton permet d'allumer une lampe si vous voulez allez voir le poulailler la nuit.\n          </p>\n        </div>\n      </div>\n    <h1>{{ msg }}</h1>\n    <div id=\"app\">\n       <label for=\"MAC\">Adresse MAC:</label>\n      <input type=\"text\" id=\"MAC\" name=\"MAC\"><br><br>\n      <md-button class=\"md-accent md-raised\" type=\"button\" v-on:click=\"ajoutMAC()\">Ajouter MAC en tant qu'invité</md-button>\n      <Chart  :k=\"componentKey\" :which_esps= \"which_esps\"/>\n    </div>\n    <!-- <md-input v-model=\"name\"></md-input>\n    <md-button class=\"md-primary md-raised\" v-on:click=\"addFloat(name)\">Add to fleet</md-button>-->\n      \n    <h1>LED states</h1>\n    <md-table>\n      <md-table-row slot=\"md-table-row\">\n        <md-table-head md-label=\"Name\">ESP</md-table-head>\n        <md-table-head md-label=\"Actions\">Action</md-table-head>\n      </md-table-row>\n      <md-table-row>\n        <md-table-cell md-label=\"Name\">30:AE:A4:86:C3:20</md-table-cell>\n\n        <md-table-cell md-label=\"Actions\">\n          <md-button class=\"md-primary md-raised\" v-on:click=\"switchState('30:AE:A4:86:C3:20')\">PING</md-button>\n        </md-table-cell>\n      </md-table-row>\n      <md-table-row>\n        <md-table-cell md-label=\"Name\">80:7D:3A:FD:DD:08</md-table-cell>\n        <md-table-cell md-label=\"Actions\">\n          <md-button class=\"md-primary md-raised\" v-on:click=\"switchState('30:AE:A4:86:C3:20')\">PING</md-button>\n        </md-table-cell>\n      </md-table-row>\n      <md-table-row>\n        <md-table-cell md-label=\"Name\">30:AE:A4:86:CA:7C</md-table-cell>\n        <md-table-cell md-label=\"Actions\">\n          <md-button class=\"md-primary md-raised\" v-on:click=\"switchState('30:AE:A4:86:C3:20')\">PING</md-button>\n        </md-table-cell>\n      </md-table-row>\n      <md-table-row>\n        <md-table-cell md-label=\"Name\">{{ which_esps[3] }}</md-table-cell>\n        <md-table-cell md-label=\"Actions\">\n          <md-button class=\"md-primary md-raised\" v-on:click=\"switchState(which_esps[3])\">PING</md-button>\n        </md-table-cell>\n      </md-table-row>\n    </md-table>\n  </div>\n</template>\n\n<script>\n//var Highcharts = require(\"highcharts\");\nimport Chart from \"./Chart\";\n\n//import highcharts from 'https://code.highcharts.com/highcharts.js'\nexport default {\n  name: \"Graphiques\",\n  data() {\n    return {\n      states: [],\n      node_url: \"http://localhost:3000\",\n      which_esps: [\n        \"30:AE:A4:86:C3:20\",\n        \"30:AE:A4:86:CA:7C\",\n        \"\"\n      ],\n      name: \"\",\n      componentKey: 0\n    };\n  },\n  components: {\n    Chart\n  },\n  props: {\n    msg: String\n  },\n  mounted() {},\n\n  methods: {\n    ajoutMAC() {\n      var adMac = document.getElementById(\"MAC\");\n      console.log(\"MAC: \" + adMac.value);\n      this.which_esps[3] = adMac.value;\n      console.log(this.which_esps);\n     // this.start();\n      this.forceRerender();\n    },\n     forceRerender() {\n      this.componentKey += 1;  \n    },\n    start: function() {\n      for (var i = 0; i < this.which_esps.length; i++) {\n        this.getStates(\"/esp/light\", [], this.which_esps[i]);\n      }\n      for (var j = 0; j < this.which_esps.length; j++) {\n        this.getStates(\"/esp/temp\", [], this.which_esps[j]);\n      }\n    },\n    getStates(path_on_node, serie, wh) {\n      this.node_url = \"http://localhost:3000\";\n\n      //https://openclassrooms.com/fr/courses/1567926-un-site-web-dynamique-avec-jquery/1569648-le-fonctionnement-de-ajax\n      var liste = [];\n      let url = this.node_url + path_on_node + \"?who=\" + wh;\n      fetch(url)\n        .then(responseJSON => {\n          return responseJSON.json();\n        })\n        .then(responseJS => {\n          this.items = responseJS;\n\n          if (this.items) {\n            this.items.forEach(function(element) {\n              liste.push([Date.parse(element.date), element.value]);\n            });\n          }\n          serie.data = liste;\n        });\n    },\n\n    async switchState(wh) {\n      var url = this.node_url + \"/esp/led\";\n      var message = \"on\";\n      var header = new Headers();\n      header.append(\"Content-Type\", \"application/json\");\n      await fetch(url, {\n        method: \"POST\",\n        headers: header,\n        body: JSON.stringify({\n          message: message,\n          who: wh\n        })\n      });\n    },\n\n    async addFlotte(wh) {\n      this.which_esps.append(wh);\n      var url = this.node_url + \"/flotte\";\n      var header = new Headers();\n      header.append(\"Content-Type\", \"application/json\");\n      await fetch(url, {\n        method: \"POST\",\n        headers: header,\n        body: JSON.stringify({\n          who: wh\n        })\n      });\n    }\n  }\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.md-table-head {\n  text-align: center;\n}\n</style>\n"]}]}