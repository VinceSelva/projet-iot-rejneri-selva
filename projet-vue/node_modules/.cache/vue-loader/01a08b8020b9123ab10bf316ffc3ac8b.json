{"remainingRequest":"C:\\Users\\Max\\Desktop\\Menez\\tp3\\tp_app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Max\\Desktop\\Menez\\tp3\\tp_app\\src\\components\\Chart.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Max\\Desktop\\Menez\\tp3\\tp_app\\src\\components\\Chart.vue","mtime":1585679294355},{"path":"C:\\Users\\Max\\Desktop\\Menez\\tp3\\tp_app\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Max\\Desktop\\Menez\\tp3\\tp_app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Max\\Desktop\\Menez\\tp3\\tp_app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBDaGFydCB9IGZyb20gImhpZ2hjaGFydHMtdnVlIjsNCmltcG9ydCBIaWdoY2hhcnRzIGZyb20gImhpZ2hjaGFydHMiOw0KaW1wb3J0IGV4cG9ydGluZ0luaXQgZnJvbSAiaGlnaGNoYXJ0cy9tb2R1bGVzL2V4cG9ydGluZyI7DQppbXBvcnQgc3RvY2tJbml0IGZyb20gImhpZ2hjaGFydHMvbW9kdWxlcy9zdG9jayI7DQoNCnN0b2NrSW5pdChIaWdoY2hhcnRzKTsNCmV4cG9ydGluZ0luaXQoSGlnaGNoYXJ0cyk7DQoNCnZhciBvcHRpb25zID0gew0KICBjaGFydDogew0KICAgIHR5cGU6ICJzcGxpbmUiDQogIH0sDQogIHRpdGxlOiB7DQogICAgdGV4dDogIlRlbXBlcmF0dXJlIiwNCiAgICB4OiAtMjAgLy9jZW50ZXINCiAgfSwNCiAgeEF4aXM6IHsNCiAgICB0aXRsZTogew0KICAgICAgdGV4dDogIkhldXJlIg0KICAgIH0sDQogICAgdHlwZTogImRhdGV0aW1lIg0KICB9LA0KICB5QXhpczogew0KICAgIHRpdGxlOiB7DQogICAgICB0ZXh0OiAiVGVtcGVyYXR1cmUgKMKwQykiDQogICAgfSwNCiAgICBwbG90TGluZXM6IFsNCiAgICAgIHsNCiAgICAgICAgdmFsdWU6IDAsDQogICAgICAgIHdpZHRoOiAxLA0KICAgICAgICBjb2xvcjogIiM4MDgwODAiDQogICAgICB9DQogICAgXQ0KICB9LA0KICB0b29sdGlwOiB7DQogICAgdmFsdWVTdWZmaXg6ICLCsEMiDQogIH0sDQogIGxlZ2VuZDogew0KICAgIGxheW91dDogInZlcnRpY2FsIiwNCiAgICBhbGlnbjogInJpZ2h0IiwNCiAgICB2ZXJ0aWNhbEFsaWduOiAibWlkZGxlIiwNCiAgICBib3JkZXJXaWR0aDogMA0KICB9LA0KICBzZXJpZXM6IFsNCiAgICB7DQogICAgICBuYW1lOiAiRVNQMSIsDQogICAgICBkYXRhOiBbXQ0KICAgIH0sDQogICAgew0KICAgICAgbmFtZTogIkVTUDIiLA0KICAgICAgZGF0YTogW10NCiAgICB9LA0KICAgIHsNCiAgICAgIG5hbWU6ICJFU1AzIiwNCiAgICAgIGRhdGE6IFtdDQogICAgfSwNCiAgICB7DQogICAgICBuYW1lOiAiRVNQNCIsDQogICAgICBkYXRhOiBbXQ0KICAgIH0NCiAgXQ0KfTsNCnZhciBvcHRpb25zMiA9IHsNCiAgY2hhcnQ6IHsNCiAgICB0eXBlOiAic3BsaW5lIg0KICB9LA0KICB0aXRsZTogew0KICAgIHRleHQ6ICJMdW1pw6hyZSIsDQogICAgeDogLTIwIC8vY2VudGVyDQogIH0sDQogIHhBeGlzOiB7DQogICAgdGl0bGU6IHsNCiAgICAgIHRleHQ6ICJIZXVyZSINCiAgICB9LA0KICAgIHR5cGU6ICJkYXRldGltZSINCiAgfSwNCiAgeUF4aXM6IHsNCiAgICB0aXRsZTogew0KICAgICAgdGV4dDogIkx1bWVuIChMdW0pIg0KICAgIH0sDQogICAgcGxvdExpbmVzOiBbDQogICAgICB7DQogICAgICAgIHZhbHVlOiAwLA0KICAgICAgICB3aWR0aDogMSwNCiAgICAgICAgY29sb3I6ICIjODA4MDgwIg0KICAgICAgfQ0KICAgIF0NCiAgfSwNCiAgdG9vbHRpcDogew0KICAgIHZhbHVlU3VmZml4OiAiTHVtIg0KICB9LA0KICBsZWdlbmQ6IHsNCiAgICBsYXlvdXQ6ICJ2ZXJ0aWNhbCIsDQogICAgYWxpZ246ICJyaWdodCIsDQogICAgdmVydGljYWxBbGlnbjogIm1pZGRsZSIsDQogICAgYm9yZGVyV2lkdGg6IDANCiAgfSwNCiAgc2VyaWVzOiBbDQogICAgew0KICAgICAgbmFtZTogIkVTUDEiLA0KICAgICAgZGF0YTogW10NCiAgICB9LA0KICAgIHsNCiAgICAgIG5hbWU6ICJFU1AyIiwNCiAgICAgIGRhdGE6IFtdDQogICAgfSwNCiAgICB7DQogICAgICBuYW1lOiAiRVNQMyIsDQogICAgICBkYXRhOiBbXQ0KICAgIH0sDQogICAgew0KICAgICAgbmFtZTogIkVTUDQiLA0KICAgICAgZGF0YTogW10NCiAgICB9DQogIF0NCn07DQpleHBvcnQgZGVmYXVsdCB7DQogIHByb3BzOiB7DQogICAgcGFydHNkYXRhOiB7DQogICAgICB0eXBlOiBBcnJheQ0KICAgIH0NCiAgfSwNCg0KICBjb21wb25lbnRzOiB7DQogICAgaGlnaGNoYXJ0czogQ2hhcnQNCiAgfSwNCg0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBub2RlX3VybDogIiIsDQogICAgICBpdGVtczogW10sDQogICAgICBvcHRpb25zOiBvcHRpb25zLA0KICAgICAgb3B0aW9uczI6IG9wdGlvbnMyLA0KICAgICAgd2hpY2hfZXNwczogWw0KICAgICAgICAiQjQ6RTY6MkQ6OTY6Nzg6RDkiLA0KICAgICAgICAiODA6N0Q6M0E6RkQ6RTg6RTgiLA0KICAgICAgICAiMzA6QUU6QTQ6ODY6Q0E6N0MiLA0KICAgICAgICAiODA6N0Q6M0E6RkQ6REQ6MDgiDQogICAgICBdLA0KICAgICAgbGlzdGVEYXRhOiBbXQ0KICAgIH07DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBzdGFydDogZnVuY3Rpb24oKSB7DQogICAgICAvKiAgICB2YXIgY2hhcnQgPSB0aGlzLiRyZWZzLmhpZ2hjaGFydHMuY2hhcnQ7DQogICAgICBjaGFydC5jcmVkaXRzLnVwZGF0ZSh7DQogICAgICAgIHN0eWxlOiB7DQogICAgICAgICAgY29sb3I6ICIjIiArICgoTWF0aC5yYW5kb20oKSAqIDB4ZmZmZmZmKSB8IDApLnRvU3RyaW5nKDE2KQ0KICAgICAgICB9DQogICAgICB9KTsgKi8NCg0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLndoaWNoX2VzcHMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgdGhpcy5wcm9jZXNzX2VzcCh0aGlzLndoaWNoX2VzcHMsIGkpOw0KICAgICAgfQ0KICAgIH0sDQoNCiAgICBwcm9jZXNzX2VzcCh3aGljaF9lc3BzLCBpKSB7DQogICAgICBjb25zdCByZWZyZXNoVCA9IDEwMDAwMDsgLy8gUmVmcmVzaCBwZXJpb2QgZm9yIGNoYXJ0DQogICAgICB2YXIgZXNwID0gd2hpY2hfZXNwc1tpXTsgLy8gTCdFU1AgImEgZGVzc2luZXIiDQogICAgDQogICAgICAvLyBHZXN0aW9uIGRlIGxhIHRlbXBlcmF0dXJlDQogICAgICAvLyBwcmVtaWVyIGFwcGVsIHBvdXIgZXZpdGVyIGRlIGRldm9pciBhdHRlbmRyZSBSZWZyZXNoVA0KICAgICAgdGhpcy5nZXRfc2FtcGxlcygiL2VzcC90ZW1wIiwgdGhpcy5vcHRpb25zLnNlcmllc1tpXSwgZXNwKTsNCiAgICAgIC8vY2FsbHMgYSBmdW5jdGlvbiBvciBldmFsdWF0ZXMgYW4gZXhwcmVzc2lvbiBhdCBzcGVjaWZpZWQNCiAgICAgIC8vaW50ZXJ2YWxzIChpbiBtaWxsaXNlY29uZHMpLg0KICAgICAgd2luZG93LnNldEludGVydmFsKA0KICAgICAgICB0aGlzLmdldF9zYW1wbGVzLA0KICAgICAgICByZWZyZXNoVCwNCiAgICAgICAgIi9lc3AvdGVtcCIsIC8vIHBhcmFtIDEgZm9yIGdldF9zYW1wbGVzKCkNCiAgICAgICAgdGhpcy5vcHRpb25zLnNlcmllc1tpXSwgLy8gcGFyYW0gMiBmb3IgZ2V0X3NhbXBsZXMoKQ0KICAgICAgICBlc3ANCiAgICAgICk7IC8vIHBhcmFtIDMgZm9yIGdldF9zYW1wbGVzKCkNCg0KICAgICAgLy8gR2VzdGlvbiBkZSBsYSBsdW1pZXJlDQogICAgICB0aGlzLmdldF9zYW1wbGVzKCIvZXNwL2xpZ2h0IiwgdGhpcy5vcHRpb25zMi5zZXJpZXNbaV0sIGVzcCk7DQogICAgICB3aW5kb3cuc2V0SW50ZXJ2YWwoDQogICAgICAgIHRoaXMuZ2V0X3NhbXBsZXMsDQogICAgICAgIHJlZnJlc2hULA0KICAgICAgICAiL2VzcC9saWdodCIsIC8vIFVSTCB0byBHRVQNCiAgICAgICAgdGhpcy5vcHRpb25zMi5zZXJpZXNbaV0sIC8vIFNlcmllIHRvIGZpbGwNCiAgICAgICAgZXNwDQogICAgICApOyAvLyBFU1AgdGFyZ2V0ZWQNCiAgICB9LA0KDQogICAgZ2V0X3NhbXBsZXMocGF0aF9vbl9ub2RlLCBzZXJpZSwgd2gpIHsNCiAgICAgIC8vIHBhdGhfb25fbm9kZSA9PiBoZWxwIHRvIGNvbXBvc2UgdXJsIHRvIGdldCBvbiBKcyBub2RlDQogICAgICAvLyBzZXJpZSA9PiBmb3IgY2hvb3NpbmcgY2hhcnQvc2VyaWUgb24gdGhlIHBhZ2UNCiAgICAgIC8vIHdoID0+IHdoaWNoIGVzcCBkbyB3ZSB3YW50IHRvIHF1ZXJ5IGRhdGENCg0KICAgICAgdGhpcy5ub2RlX3VybCA9ICJodHRwOi8vbG9jYWxob3N0OjMwMDAiOw0KDQogICAgICAvL2h0dHBzOi8vb3BlbmNsYXNzcm9vbXMuY29tL2ZyL2NvdXJzZXMvMTU2NzkyNi11bi1zaXRlLXdlYi1keW5hbWlxdWUtYXZlYy1qcXVlcnkvMTU2OTY0OC1sZS1mb25jdGlvbm5lbWVudC1kZS1hamF4DQogICAgICAgIHZhciBsaXN0ZSA9IFtdDQogICAgICBsZXQgdXJsID0gdGhpcy5ub2RlX3VybCArIHBhdGhfb25fbm9kZSArICI/d2hvPSIgKyB3aDsNCiAgICAgIGZldGNoKHVybCkNCiAgICAgICAgLnRoZW4ocmVzcG9uc2VKU09OID0+IHsNCiAgICAgICAgICByZXR1cm4gcmVzcG9uc2VKU09OLmpzb24oKTsNCiAgICAgICAgfSkNCiAgICAgICAgLnRoZW4ocmVzcG9uc2VKUyA9PiB7DQogICAgICAgICAgdGhpcy5pdGVtcyA9IHJlc3BvbnNlSlM7DQoNCiAgICAgICAgICBpZiAodGhpcy5pdGVtcykgew0KICAgICAgICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICBsaXN0ZS5wdXNoKFtEYXRlLnBhcnNlKGVsZW1lbnQuZGF0ZSksIGVsZW1lbnQudmFsdWVdKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0NCiAgICAgICAgICBzZXJpZS5kYXRhID0gbGlzdGU7DQogICAgICAgICAgDQogICAgICAgIH0pOw0KICAgIH0NCiAgfQ0KfTsNCg=="},{"version":3,"sources":["Chart.vue"],"names":[],"mappings":";;;;;;;;;;;AAWA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Chart.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <md-button class=\"md-primary md-raised\" @click=\"start\">Start simulation</md-button>\r\n    <br />\r\n    <br />\r\n    <highcharts :options=\"options\" ref=\"highcharts\"></highcharts>\r\n    <highcharts :options=\"options2\" ref=\"highcharts\"></highcharts>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Chart } from \"highcharts-vue\";\r\nimport Highcharts from \"highcharts\";\r\nimport exportingInit from \"highcharts/modules/exporting\";\r\nimport stockInit from \"highcharts/modules/stock\";\r\n\r\nstockInit(Highcharts);\r\nexportingInit(Highcharts);\r\n\r\nvar options = {\r\n  chart: {\r\n    type: \"spline\"\r\n  },\r\n  title: {\r\n    text: \"Temperature\",\r\n    x: -20 //center\r\n  },\r\n  xAxis: {\r\n    title: {\r\n      text: \"Heure\"\r\n    },\r\n    type: \"datetime\"\r\n  },\r\n  yAxis: {\r\n    title: {\r\n      text: \"Temperature (°C)\"\r\n    },\r\n    plotLines: [\r\n      {\r\n        value: 0,\r\n        width: 1,\r\n        color: \"#808080\"\r\n      }\r\n    ]\r\n  },\r\n  tooltip: {\r\n    valueSuffix: \"°C\"\r\n  },\r\n  legend: {\r\n    layout: \"vertical\",\r\n    align: \"right\",\r\n    verticalAlign: \"middle\",\r\n    borderWidth: 0\r\n  },\r\n  series: [\r\n    {\r\n      name: \"ESP1\",\r\n      data: []\r\n    },\r\n    {\r\n      name: \"ESP2\",\r\n      data: []\r\n    },\r\n    {\r\n      name: \"ESP3\",\r\n      data: []\r\n    },\r\n    {\r\n      name: \"ESP4\",\r\n      data: []\r\n    }\r\n  ]\r\n};\r\nvar options2 = {\r\n  chart: {\r\n    type: \"spline\"\r\n  },\r\n  title: {\r\n    text: \"Lumière\",\r\n    x: -20 //center\r\n  },\r\n  xAxis: {\r\n    title: {\r\n      text: \"Heure\"\r\n    },\r\n    type: \"datetime\"\r\n  },\r\n  yAxis: {\r\n    title: {\r\n      text: \"Lumen (Lum)\"\r\n    },\r\n    plotLines: [\r\n      {\r\n        value: 0,\r\n        width: 1,\r\n        color: \"#808080\"\r\n      }\r\n    ]\r\n  },\r\n  tooltip: {\r\n    valueSuffix: \"Lum\"\r\n  },\r\n  legend: {\r\n    layout: \"vertical\",\r\n    align: \"right\",\r\n    verticalAlign: \"middle\",\r\n    borderWidth: 0\r\n  },\r\n  series: [\r\n    {\r\n      name: \"ESP1\",\r\n      data: []\r\n    },\r\n    {\r\n      name: \"ESP2\",\r\n      data: []\r\n    },\r\n    {\r\n      name: \"ESP3\",\r\n      data: []\r\n    },\r\n    {\r\n      name: \"ESP4\",\r\n      data: []\r\n    }\r\n  ]\r\n};\r\nexport default {\r\n  props: {\r\n    partsdata: {\r\n      type: Array\r\n    }\r\n  },\r\n\r\n  components: {\r\n    highcharts: Chart\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      node_url: \"\",\r\n      items: [],\r\n      options: options,\r\n      options2: options2,\r\n      which_esps: [\r\n        \"B4:E6:2D:96:78:D9\",\r\n        \"80:7D:3A:FD:E8:E8\",\r\n        \"30:AE:A4:86:CA:7C\",\r\n        \"80:7D:3A:FD:DD:08\"\r\n      ],\r\n      listeData: []\r\n    };\r\n  },\r\n  methods: {\r\n    start: function() {\r\n      /*    var chart = this.$refs.highcharts.chart;\r\n      chart.credits.update({\r\n        style: {\r\n          color: \"#\" + ((Math.random() * 0xffffff) | 0).toString(16)\r\n        }\r\n      }); */\r\n\r\n      for (var i = 0; i < this.which_esps.length; i++) {\r\n        this.process_esp(this.which_esps, i);\r\n      }\r\n    },\r\n\r\n    process_esp(which_esps, i) {\r\n      const refreshT = 100000; // Refresh period for chart\r\n      var esp = which_esps[i]; // L'ESP \"a dessiner\"\r\n    \r\n      // Gestion de la temperature\r\n      // premier appel pour eviter de devoir attendre RefreshT\r\n      this.get_samples(\"/esp/temp\", this.options.series[i], esp);\r\n      //calls a function or evaluates an expression at specified\r\n      //intervals (in milliseconds).\r\n      window.setInterval(\r\n        this.get_samples,\r\n        refreshT,\r\n        \"/esp/temp\", // param 1 for get_samples()\r\n        this.options.series[i], // param 2 for get_samples()\r\n        esp\r\n      ); // param 3 for get_samples()\r\n\r\n      // Gestion de la lumiere\r\n      this.get_samples(\"/esp/light\", this.options2.series[i], esp);\r\n      window.setInterval(\r\n        this.get_samples,\r\n        refreshT,\r\n        \"/esp/light\", // URL to GET\r\n        this.options2.series[i], // Serie to fill\r\n        esp\r\n      ); // ESP targeted\r\n    },\r\n\r\n    get_samples(path_on_node, serie, wh) {\r\n      // path_on_node => help to compose url to get on Js node\r\n      // serie => for choosing chart/serie on the page\r\n      // wh => which esp do we want to query data\r\n\r\n      this.node_url = \"http://localhost:3000\";\r\n\r\n      //https://openclassrooms.com/fr/courses/1567926-un-site-web-dynamique-avec-jquery/1569648-le-fonctionnement-de-ajax\r\n        var liste = []\r\n      let url = this.node_url + path_on_node + \"?who=\" + wh;\r\n      fetch(url)\r\n        .then(responseJSON => {\r\n          return responseJSON.json();\r\n        })\r\n        .then(responseJS => {\r\n          this.items = responseJS;\r\n\r\n          if (this.items) {\r\n            this.items.forEach(function(element) {\r\n                liste.push([Date.parse(element.date), element.value]);\r\n            });\r\n          }\r\n          serie.data = liste;\r\n          \r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n"]}]}